{
  "$schema": "http://json-schema.org/draft-07/schema",
  "type": "object",
  "properties": {
    "nexus": {
      "type": "string",
      "pattern": "^https?://"
    },
    "author": {
      "type": "object",
      "required": ["handle", "url"],
      "properties": {
        "handle": {
          "type": "string",
          "maxLength": 30
        },
        "about": {
          "type": "string",
          "maxLength": 400
        },
        "url": {
          "type": "string",
          "pattern": "^https?://"
        }
      },
      "additionalProperties": false
    },
    "threads": {
      "type": "array",
      "uniqueItems": true,
      "additionalItems": true,
      "items": {
            "type": "object",
            "required": ["id", "name", "record"],
            "properties": {
              "id": {
                "type": "string",
                "pattern": "[a-zA-Z0-9-]{3,36}"
              },
              "name": {
                "type": "string",
                "minLength": 3,
                "maxLength": 30
              },
              "description": {
                "type": "string",
                "maxLength": 400
              },
              "record": {
                "type": "object",
                "required": ["timestamp", "main"],
                "properties": {
                  "timestamp": {
                    "type": "string",
                    "pattern": "^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) (0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$"
                  },
                  "main": {
                    "type": "string",
                    "maxLength": 1000,
                    "minLength": 1
                  },
                  "aside": {
                    "type": "string",
                    "maxLength": 400
                  },
                  "media": {
                    "type": "object",
                    "required": ["url", "type"],
                    "properties": {
                      "url": {
                        "type": "string",
                        "pattern": "^https?://"
                      },
                      "type": {
                        "type": "string",
                        "enum": [
                          "page",
                          "video",
                          "image",
                          "audio",
                          "youtube",
                          "vimeo",
                          "soundcloud"
                        ]
                      },
                      "caption": {
                        "type": "string",
                        "maxLength": 1000
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "additionalProperties": false
              },
              "linked": {
                "type": "array",
                "uniqueItems": true,
                "additionalItems": true,
                "items": {
     
                      "type": "object",
                      "required": ["url", "id"],
                      "properties": {
                        "url": {
                          "type": "string",
                          "pattern": "^https?://"
                        },
                        "id": {
                          "type": "string",
                          "pattern": "[a-zA-Z0-9-]{3,36}"
                        }
                      },
                      "additionalProperties": false
           
                }
              }
            },
            "additionalProperties": false
   
      }
    }
  },
  "required": [
    "nexus",
    "author",
    "threads"
  ],
  "additionalProperties": false
}
