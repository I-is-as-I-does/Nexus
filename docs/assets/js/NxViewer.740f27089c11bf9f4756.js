/*! Nexus | (c) 2021 I-is-as-I-does | AGPLv3 license */
"use strict";(self.webpackChunknexus=self.webpackChunknexus||[]).push([[689],{425:(n,t,e)=>{e.d(t,{gd:()=>p,IW:()=>f,rH:()=>v,ao:()=>x,eV:()=>h,Q$:()=>g,Sb:()=>m,Zx:()=>I,j1:()=>D,iy:()=>k,wI:()=>y});var r=e(931),a=e(881),o=e(158),d=e(180),i=e(142),c=e(75),s=e(696);function l(n){var t="/";return n.threadId&&"/"!=n.threadId&&(t=n.srcData.threads[n.threadIndex].name),t}function u(n,t,e){e.dataUrl&&t.dataUrl==e.dataUrl&&t.threadId==e.threadId?n.classList.add("nx-on-display"):n.classList.remove("nx-on-display")}function p(n,t){var e=document.createElement(n);return t&&(e.className=t),e}function f(n,t,e=[],r="viewer"){var a=p("DIV","nx-instance nx-"+r),o=p("HEADER");o.append(...n);var d=p("MAIN");if(d.append(...t),a.append(o,d),e.length){var i=p("FOOTER");i.append(...e),a.append(i)}return a}function v(n,t=null,e=null,r=!1){var a,o,d=p("SECTION","nx-"+n+"  nx-block");if(r&&d.append(((o=p("SPAN","nx-landmark nx-landmark-"+(a=n))).textContent=(0,c.GY)(a),(0,i.w)(o,a),o)),t){var s=p("HEADER");s.append(...t),d.append(s)}return e&&d.append(...e),d}function x(){var n=(0,a.ah)();n.length||(n=["Init failed"]);var t=p("P");(0,o.o)()?t.className="nx-error":(t.style.margin="0 auto",t.style.fontFamily='"Courier New", Courier, monospace',t.style.fontSize="13px");var e=p("BR"),r=p("SPAN");return r.textContent="—/ — ",t.append(r,e),n.forEach((n=>{var r=p("SPAN");r.textContent=(0,c.GY)(n),(0,i.w)(r,n),t.append(r,e.cloneNode())})),t}function h(n){n.position>0?n.ctrls.prev.elm.classList.remove("nx-nav-end"):n.ctrls.prev.elm.classList.add("nx-nav-end"),n.position<n.count-1?n.ctrls.next.elm.classList.remove("nx-nav-end"):n.ctrls.next.elm.classList.add("nx-nav-end")}function g(n,t){Object.keys(n.ctrls).forEach((e=>{n.ctrls[e].elm=p("A","nx-nav-end"),n.ctrls[e].elm.textContent=n.ctrls[e].symbol,n.ctrls[e].elm.addEventListener("click",(function(){n.ctrls[e].elm.classList.contains("nx-nav-end")||("next"==e?n.position++:n.position--,t(e),h(n))}))}))}function m(n,t,e=null,r=null){var a="nx-selected";t.classList.add("nx-select-toggle");var o,d="INPUT"==t.tagName;d?(t.setAttribute("autocomplete","off"),o=t.value):o=t.textContent;var i=p("UL","nx-select-list");n.forEach((n=>{var r=p("LI");r.textContent=n,r.dataset.item=n,n==o&&r.classList.add(a),r.addEventListener("click",(()=>{if(!r.classList.contains(a)){var n=r.textContent,o=i.querySelector(".nx-selected");o&&o.classList.remove(a),r.classList.add(a),d?t.value=n:t.textContent=n,"function"==typeof e&&e(n),i.style.display="none"}})),i.append(r)})),i.style.display="none";var c=p("DIV","nx-select");return r&&c.classList.add(r),c.append(t,i),t.addEventListener("click",(()=>{var n="none";i.style.display==n&&(n="block"),i.style.display=n})),c}function I(n,t){u(n,t,(0,d.Mq)()),(0,d.Ek)((function(e){u(n,t,e)}))}function D(n,t=!1){var e=p("A","nx-view-link");return e.append(k(n,t)),e}function k(n,t=!1){var e=p("SPAN","nx-thread-name");return e.textContent=l(n),t&&(0,d.Ek)((function(n){var t=l(n);(0,r.Po)(e,t,15)})),e}function y(){return v("app",null,[(t=p("A","nx-app-link nx-external-link"),t.target="_blank",t.href=s.Gd,t.title="Nexus",t.textContent="Nexus",t),(n=p("P"),n.textContent=(0,c.VQ)(),m((0,c.Ye)(),n,(function(n){(0,i.T)(n)}),"nx-lang-switch"))],!1);var n,t}},694:(n,t,e)=>{e.d(t,{D:()=>an});var r=e(931),a=e(425),o=e(180),d=e(85);function i(n,t){n.classList.contains("nx-on-display")?(n.classList.remove("nx-unseen"),n.lastChild.textContent=""):(0,d.$3)(t)&&(n.classList.add("nx-unseen"),n.lastChild.textContent="*")}function c(n,t=!1){var e=(0,a.gd)("SPAN","nx-handle");return n.srcData&&(e.textContent=n.srcData.author.handle),t&&(0,o.Ek)((function(n){(0,r.Po)(e,n.srcData.author.handle,20)}),!0),e}function s(n,t=!1){var e=(0,a.gd)("SPAN","nx-author-url"),i=[];["[","]"].forEach((n=>{var t=(0,a.gd)("SPAN","nx-author-url-brackets");t.textContent=n,i.push(t)}));var c=(0,a.gd)("A","nx-external-link");c.target="_blank";var s="";return n.srcData&&(s=n.srcData.author.url),c.href=s,n.srcData&&(c.textContent=(0,d.KR)(n.srcData.author.url)),e.append(i[0],c,i[1]),t&&(0,o.Ek)((function(n){c.href=n.srcData.author.url,(0,r.Po)(c,(0,d.KR)(n.srcData.author.url),20)}),!0),e}function l(n,t=!1){var e=(0,a.j1)(n,t);return"/"!=n.threadId&&((0,a.Zx)(e,n),function(n,t){n.append((0,a.gd)("SPAN","nx-new-tag")),i(n,t),(0,o.Ek)((function(){i(n,t)}))}(e,n)),e.addEventListener("click",(()=>{(0,o.f2)(n)})),e}function u(n,t=!1){var e=(0,a.gd)("A","nx-author-link");e.append(c(n,t));var r={dataUrl:n.dataUrl,srcData:n.srcData,threadId:"/",threadIndex:-1};return e.addEventListener("click",(function(){(0,o.f2)(r,"/")})),e}var p=e(954),f=!1,v=null,x=null,h={dataUrl:null,srcData:null,threadId:"/",threadIndex:-1},g={ctrls:{prev:{symbol:"<",elm:null},next:{symbol:">",elm:null}},position:0,count:1};function m(n){var t=document.createElement("LI");return t.append(...function(n){return[u(n,!1),s(n,!1),I(n)]}(n)),t}function I(n){var t=(0,a.j1)(n,!1);return(0,a.Zx)(t,n),t.addEventListener("click",(()=>{f=!0,(0,o.f2)(n,!0),f=!1})),t}function D(n){return function(n){v=(0,a.gd)("UL","nx-history-list");var t=(0,a.gd)("LI");t.textContent="...",v.append(t),n.srcData&&v.append(m(n)),(x=(0,a.gd)("DIV","nx-history-drawer")).append(v),x.style.display="none",(0,o.Ek)((function(n){!function(n){if(!f&&(n.dataUrl!=h.dataUrl||n.threadId!=h.threadId)){h=n,g.count>100?v.children[1].remove():g.count++,g.position=g.count-1;var t=m(n);(0,r.am)(v,t,!1,!0,200,(function(){(0,p.SZ)(v)})),(0,a.eV)(g)}}(n)}))}(n),(0,a.rH)("history",null,[(e=(0,a.gd)("DIV","nx-history-nav"),(0,a.Q$)(g,(function(n){var t=g.position;"prev"==n&&(t+=1),v.children[t].querySelector(".nx-thread-name").click()})),e.append(g.ctrls.prev.elm,((t=(0,a.gd)("A","nx-history-toggle")).textContent="≚",t.addEventListener("click",(()=>{"≙"==t.textContent?(t.textContent="≚",t.classList.remove("nx-active"),(0,r.Vv)(x,200)):(t.textContent="≙",t.classList.add("nx-active"),(0,r.YQ)(x,200),(0,p.SZ)(v))})),t),g.ctrls.next.elm),e),x],!1);var t,e}var k=null;function y(n){var t=(0,a.gd)("DIV","nx-about-author");return t.append(C(n)),(0,o.Ek)((function(n){(0,r.Mo)(t.firstChild,C(n))}),!0),t}function C(n){var t=(0,a.gd)("P");return n.srcData&&(t.textContent=n.srcData.author.about),t}function L(n,t,e){var r=Object.assign({},n);r.threadId=t,r.threadIndex=e;var o=(0,a.gd)("LI");return o.append(l(r,!1)),o}var E=e(811),V=e(618),A=e(142),b=e(75),N=e(25),U=null,P=!1;function S(n,t){var e=(0,a.gd)("A","nx-source-"+n);return e.textContent=t,e}function w(n){return n.dataUrl?'{"url": "'+n.dataUrl+'", "id": "'+n.threadId+'"}':""}function M(n,t){var e=(0,a.gd)("TEXTAREA");return e.spellcheck=!1,e.textContent=t(n),(0,o.Ek)((function(n){e.textContent=t(n)})),e}function O(n,t){var e,o,d,i,c,s=(0,a.gd)("DIV","nx-"+n+"-snippet");return s.append(t,(e=t,i=S("copy","⧉"),o=(0,b.GY)("copied"),(d=(0,a.gd)("SPAN","nx-source-copy-tooltip")).textContent=o,d.style.opacity=0,d.hidden=!0,(0,A.w)(d,o),c=d,i.append(c),i.addEventListener("click",(()=>(0,E.vQ)(e.textContent,(()=>{(0,r.Vn)(c,1e3)})))),i)),s}function j(n){if(n.srcData)return JSON.stringify(n.srcData)}function H(n){return n.dataUrl?'<div id="Nexus" data-src="'+n.dataUrl+'" data-id="'+n.threadId+'" data-style="'+(0,V.B)("style")+'" data-lang="'+(0,b.VQ)()+'"></div>\r\n<script src="'+N.Je+'"><\/script>':""}function R(n,t=!1){return t&&(P=!0),(0,a.rH)("source",null,function(n){U=(0,a.gd)("DIV","nx-source-drawer"),P?U.append(function(n){return O("source",M(n,j))}(n)):U.append(function(n){return O("json",M(n,w))}(n),function(n){return O("embed",M(n,H))}(n)),U.style.display="none";var t,e,o=(0,a.gd)("DIV","nx-source-toggle"),d=(t="< />",(e=S("snippets","</>")).addEventListener("click",(()=>{e.textContent==t?(e.textContent="</>",e.classList.remove("nx-active"),(0,r.Vv)(U,100)):(e.textContent=t,e.classList.add("nx-active"),(0,r.YQ)(U,100,(function(){U.scrollIntoView({block:"end",behavior:"smooth",inline:"nearest"})})))})),e);return o.append(d),[o,U]}(n),!1)}var Q,q,G,T,Y=e(368),Z=e(753),F=e(881);function $(n){var t=(0,a.gd)("DIV","nx-boken-media");return t.append(function(n){var t=(0,a.gd)("A","nx-external-link");return t.target="_blank",t.href=n,t.textContent=(0,Z.Fj)(n,!0),t}(n)),t}function _(n){var t=(0,a.gd)("A","nx-external-link");return t.href=n,t.target="_blank",t.textContent=(0,Z.Fj)(n,!0),t}function B(n){var t=(0,a.gd)("VIDEO");t.setAttribute("controls",!0);var e=(0,a.gd)("SOURCE");return e.src=n,t.append(e),e.onerror=()=>{(0,r.Mo)(t,$(n))},t}function J(n){var t=(0,a.gd)("AUDIO");return t.setAttribute("controls",!0),t.src=n,t.onerror=()=>{(0,r.Mo)(t,$(n))},t}function K(n){var t=(0,a.gd)("IMG");return t.src=n,t.onerror=()=>{(0,r.Mo)(t,$(n))},t}function W(n){var t=(0,a.gd)("DIV","nx-record-media");return Q=(0,a.gd)("DIV"),function(n){n&&n.record.media.type&&function(n,t,e=null){var a={page:_,image:K,video:B,audio:J},o=function(t){Q.className="nx-"+n+"-media",e?(0,r.Mo)(e,t):(0,r.am)(Q,t,!1,!0,200)};if(a.hasOwnProperty(n))o(a[n](t));else{var i=(0,d.VG)(t);i?o((0,Z.qm)(i)):(0,Z.ie)((0,Z.ip)(t,n,360)).then((n=>{(0,d.q1)(t,n),o((0,Z.qm)(n))})).catch((n=>{(0,F.Pr)(n),o($(t))}))}}(n.record.media.type,n.record.media.url)}(n),t.append(Q,function(n){return rn(n,["record","media","caption"])}(n)),t}function z(n){var t=null;return n.threadId&&"/"!=n.threadId&&(t=n.srcData.threads[n.threadIndex]),t}function X(n){return(q=(0,a.gd)("DIV")).append(...tn(n)),(0,a.rH)("distant",null,[q],!0)}function nn(n,t){var e=(0,a.iy)(n,!0);return function(n){(G=(0,a.gd)("DIV","nx-thread-description")).append(rn(n,["description"]))}(t),function(n){(T=(0,a.gd)("DIV","nx-local-record")).append(en(n))}(t),(0,a.rH)("local",[e],[G,T],!0)}function tn(n){var t=[];null!=n&&(t=n.linked);var e=(0,a.gd)("UL","nx-distant-records"),d=(0,a.gd)("UL","nx-distant-indexes");if(t.length){var i=[];t.forEach((n=>{n.url&&(0,o.t$)(n.url,n.id).then((n=>{var t,o=[u(n,!1),s(n,!1),l(n,!1)];"/"==n.threadId?i.includes(n.threadId)||(i.push(n.threadId),(t=(0,a.gd)("LI")).append(...o),(0,r.am)(d,t,!1,!1,200)):((t=(0,a.gd)("LI")).append(...o),t.append(en(z(n))),(0,r.am)(e,t,!1,!1,200))}))}))}else{var c=(0,a.gd)("LI");c.textContent="...",e.append(c)}return[e,d]}function en(n){var t=(0,a.gd)("DIV","nx-record");return t.append(function(n){var t=(0,a.gd)("DIV","nx-record-meta"),e=rn(n,["record","timestamp"]);return t.append(e),t}(n),function(n){var t=(0,a.gd)("DIV","nx-record-body");return t.append(rn(n,["record","main"]),rn(n,["record","aside"])),t}(n),W(n)),t}function rn(n,t){var e=(0,a.gd)("P","nx-"+t.join("-"));return e.textContent=function(n,t=[]){if(n){for(var e=Object.assign({},n),r=0;r<t.length;r++)e=e[t[r]];if((0,Y.fw)(e))return e}return""}(n,t),e}function an(n){var t=(0,a.gd)("DIV");t.append(function(n){!function(n){if(k=(0,a.gd)("UL"),n.srcData){var t=n.srcData.index;if(t.length)for(var e=0;e<t.length;e++)k.append(L(n,t[e],e));(0,o.Ek)((function(n){!function(n){var t=k.childNodes,e=n.srcData.index,a=e.length,o=t.length,d=0;if(o)for(var i=function(n){(0,r.Vv)(n,200,(function(){n.remove()}))},c=0;c<o;c++)if(a>c){var s=L(n,e[c],c);(0,r.Mo)(t[c],s),d++}else i(t[c]);if(d<a)for(var l=d;l<a;l++)(0,r.am)(k,L(n,e[l],l),!1,!0,200)}(n)}),!0)}}(n);var t=[c(n,!0),s(n,!0)],e=[y(n),k];return(0,a.rH)("index",t,e,!0)}(n));var e=(0,a.gd)("DIV");return e.append(...function(n){var t=z(n),e=[nn(n,t),X(t)];return(0,o.Ek)((function(n){!function(n){var t=z(n),e=en(t),a=rn(t,["description"]);(0,r.Mo)(G.firstChild,a),(0,r.Mo)(T.firstChild,e);var o=tn(t);Array.from(q.childNodes).forEach(((n,t)=>{(0,r.Mo)(n,o[t])}))}(n)})),e}(n)),(0,a.IW)([(0,a.wI)(),D(n)],[t,e],[R(n)])}}}]);