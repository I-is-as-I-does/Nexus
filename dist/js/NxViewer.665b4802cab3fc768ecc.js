/*! Nexus | (c) 2021 I-is-as-I-does | AGPLv3 license */
"use strict";(self.webpackChunknexus=self.webpackChunknexus||[]).push([[689],{425:(n,t,e)=>{e.d(t,{gd:()=>p,IW:()=>v,_$:()=>f,rH:()=>x,ao:()=>h,eV:()=>g,Q$:()=>m,Sb:()=>I,I$:()=>y,j1:()=>D,iy:()=>k});var r=e(931),a=e(881),i=e(158),o=e(180),d=e(142),c=e(75),l=e(696);function s(n){var t="/";return n.threadId&&"/"!=n.threadId&&(t=n.srcData.threads[n.threadIndex].name),t}function u(n,t,e){e.dataUrl&&t.dataUrl==e.dataUrl&&t.threadId==e.threadId?n.classList.add("nx-on-display"):n.classList.remove("nx-on-display")}function p(n,t){var e=document.createElement(n);return t&&(e.className=t),e}function v(n){var t,e,r,a=p("DIV","nx-instance");return a.append(((r=p("HEADER")).append(((e=p("A","nx-app-link nx-external-link")).target="_blank",e.href=l.Gd,e.title="Nexus",e.textContent="Nexus",e),((t=p("P")).textContent=(0,c.VQ)(),I((0,c.Ye)(),t,(function(n){(0,d.T)(n)}),"nx-lang-switch"))),r),function(n){var t=p("MAIN");return t.append(...n),t}(n)),a}function f(n,t,e=[],r="viewer"){var a=p("DIV","nx-"+r),i=p("NAV");i.append(...n);var o=p("SECTION");if(o.append(...t),a.append(i,o),e.length){var d=p("FOOTER");d.append(...e),a.append(d)}return a}function x(n,t=null,e=null,r=!1){var a,i,o=p("DIV","nx-"+n+" nx-block");if(r&&o.append(((i=p("SPAN","nx-landmark nx-landmark-"+(a=n))).textContent=(0,c.GY)(a),(0,d.w)(i,a),i)),t){var l=p("DIV","nx-thread-header");l.append(...t),o.append(l)}return e&&o.append(...e),o}function h(){var n=(0,a.ah)();n.length||(n=["Init failed"]);var t=p("P");(0,i.o)()?t.className="nx-error":(t.style.margin="0 auto",t.style.fontFamily='"Courier New", Courier, monospace',t.style.fontSize="13px");var e=p("BR"),r=p("SPAN");return r.textContent="—/ — ",t.append(r,e),n.forEach((n=>{var r=p("SPAN");r.textContent=(0,c.GY)(n),(0,d.w)(r,n),t.append(r,e.cloneNode())})),t}function g(n){n.position>0?n.ctrls.prev.elm.classList.remove("nx-nav-end"):n.ctrls.prev.elm.classList.add("nx-nav-end"),n.position<n.count-1?n.ctrls.next.elm.classList.remove("nx-nav-end"):n.ctrls.next.elm.classList.add("nx-nav-end")}function m(n,t){Object.keys(n.ctrls).forEach((e=>{n.ctrls[e].elm=p("A","nx-nav-ctrl nx-nav-end"),n.ctrls[e].elm.textContent=n.ctrls[e].symbol,n.ctrls[e].elm.addEventListener("click",(function(){n.ctrls[e].elm.classList.contains("nx-nav-end")||("next"==e?n.position++:n.position--,t(e),g(n))}))}))}function I(n,t,e=null,r=null){var a="nx-selected";t.classList.add("nx-select-toggle");var i,o="INPUT"==t.tagName;o?(t.setAttribute("autocomplete","off"),i=t.value):i=t.textContent;var d=p("UL","nx-select-list"),c=p("DIV","nx-select");return r&&c.classList.add(r),c.append(t,d),t.addEventListener("click",(()=>{var n="none";d.style.display==n&&(n="block"),d.style.display=n})),n.forEach((n=>{var r=p("LI");r.textContent=n,r.dataset.item=n,n==i&&r.classList.add(a),d.append(r),r.addEventListener("click",(()=>{var n=r.textContent;if((o?t.value:t.textContent)!=n){if(!r.classList.contains(a)){var i=d.querySelector(".nx-selected");i&&i.classList.remove(a),r.classList.add(a)}o?t.value=n:t.textContent=n,t.dispatchEvent(new window.Event("change")),"function"==typeof e&&e(n)}d.style.display="none"}))})),d.style.display="none",c}function y(n,t){u(n,t,(0,o.Mq)()),(0,o.Ek)((function(e){u(n,t,e)}))}function D(n,t=!1){var e=p("A","nx-view-link");return e.append(k(n,t)),e}function k(n,t=!1){var e=p("SPAN","nx-thread-name");return e.textContent=s(n),t&&(0,o.Ek)((function(n){var t=s(n);(0,r.Po)(e,t,15)})),e}},694:(n,t,e)=>{e.d(t,{D:()=>sn});var r=e(931),a=e(425),i=e(180),o=e(85);function d(n,t){n.classList.contains("nx-on-display")?(n.classList.remove("nx-unseen"),n.lastChild.textContent=""):(0,o.$3)(t)&&(n.classList.add("nx-unseen"),n.lastChild.textContent="*")}function c(n,t=!1){var e=(0,a.gd)("SPAN","nx-handle");return n.srcData&&(e.textContent=n.srcData.author.handle),t&&(0,i.Ek)((function(n){(0,r.Po)(e,n.srcData.author.handle,20)}),!0),e}function l(n,t=!1){var e=(0,a.gd)("SPAN","nx-author-url"),d=[];["[","]"].forEach((n=>{var t=(0,a.gd)("SPAN","nx-author-url-brackets");t.textContent=n,d.push(t)}));var c=(0,a.gd)("A","nx-external-link");c.target="_blank";var l="";return n.srcData&&(l=n.srcData.author.url),c.href=l,n.srcData&&(c.textContent=(0,o.KR)(n.srcData.author.url)),e.append(d[0],c,d[1]),t&&(0,i.Ek)((function(n){c.href=n.srcData.author.url,(0,r.Po)(c,(0,o.KR)(n.srcData.author.url),20)}),!0),e}function s(n,t=!1){var e=(0,a.j1)(n,t);return"/"!=n.threadId&&((0,a.I$)(e,n),function(n,t){n.append((0,a.gd)("SPAN","nx-new-tag")),d(n,t),(0,i.Ek)((function(){d(n,t)}))}(e,n)),e.addEventListener("click",(()=>{(0,i.f2)(n)})),e}function u(n,t=!1){var e=(0,a.gd)("A","nx-author-link");e.append(c(n,t));var r={dataUrl:n.dataUrl,srcData:n.srcData,threadId:"/",threadIndex:-1};return e.addEventListener("click",(function(){(0,i.f2)(r,"/")})),e}var p=e(954),v=!1,f=null,x=null,h={dataUrl:null,srcData:null,threadId:"/",threadIndex:-1},g={ctrls:{prev:{symbol:"<",elm:null},next:{symbol:">",elm:null}},position:0,count:1};function m(n){var t=document.createElement("LI");return t.append(...function(n){return[u(n,!1),l(n,!1),I(n)]}(n)),t}function I(n){var t=(0,a.j1)(n,!1);return(0,a.I$)(t,n),t.addEventListener("click",(()=>{v=!0,(0,i.f2)(n,!0),v=!1})),t}function y(n){return function(n){f=(0,a.gd)("UL","nx-history-list");var t=(0,a.gd)("LI");t.textContent="...",f.append(t),n.srcData&&f.append(m(n)),(x=(0,a.gd)("DIV","nx-history-drawer")).append(f),x.style.display="none",(0,i.Ek)((function(n){!function(n){if(!v&&(n.dataUrl!=h.dataUrl||n.threadId!=h.threadId)){h=n,g.count>100?f.children[1].remove():g.count++,g.position=g.count-1;var t=m(n);(0,r.am)(f,t,!1,!0,200,(function(){(0,p.SZ)(f)})),(0,a.eV)(g)}}(n)}))}(n),(0,a.rH)("history",null,[(e=(0,a.gd)("DIV","nx-history-nav"),(0,a.Q$)(g,(function(n){var t=g.position;"prev"==n&&(t+=1),f.children[t].querySelector(".nx-thread-name").click()})),e.append(g.ctrls.prev.elm,((t=(0,a.gd)("A","nx-history-toggle")).textContent="≚",t.addEventListener("click",(()=>{"≙"==t.textContent?(t.textContent="≚",t.classList.remove("nx-active"),(0,r.Vv)(x,200)):(t.textContent="≙",t.classList.add("nx-active"),(0,r.YQ)(x,200),(0,p.SZ)(f))})),t),g.ctrls.next.elm),e),x],!1);var t,e}var D=null;function k(n){var t=(0,a.gd)("DIV","nx-about-author");return t.append(C(n)),(0,i.Ek)((function(n){(0,r.Mo)(t.firstChild,C(n))}),!0),t}function C(n){var t=(0,a.gd)("P");return n.srcData&&(t.textContent=n.srcData.author.about),t}function V(n,t,e){var r=Object.assign({},n);r.threadId=t,r.threadIndex=e;var i=(0,a.gd)("LI");return i.append(s(r,!1)),i}var E=e(811),L=e(618),b=e(142),A=e(75),N=e(25),P=null,U=!1;function w(n,t){var e=(0,a.gd)("A","nx-source-"+n);return e.textContent=t,e}function S(n){return n.dataUrl?'{"url": "'+n.dataUrl+'", "id": "'+n.threadId+'"}':""}function M(n,t){var e=(0,a.gd)("TEXTAREA");return e.spellcheck=!1,e.textContent=t(n),(0,i.Ek)((function(n){e.textContent=t(n)})),e}function O(n,t){var e,i,o,d,c,l=(0,a.gd)("DIV","nx-"+n+"-snippet");return l.append(t,(e=t,d=w("copy","⧉"),i=(0,A.GY)("copied"),(o=(0,a.gd)("SPAN","nx-source-copy-tooltip")).textContent=i,o.style.opacity=0,o.hidden=!0,(0,b.w)(o,i),c=o,d.append(c),d.addEventListener("click",(()=>(0,E.vQ)(e.textContent,(()=>{(0,r.Vn)(c,1e3)})))),d)),l}function j(n){if(n.srcData)return JSON.stringify(n.srcData)}function $(n){if(n.dataUrl){var t=n.dataUrl,e=n.threadId;return"nx-edit"==t&&(t="",e="/"),'<div id="Nexus" data-src="'+t+'" data-id="'+e+'" data-style="'+(0,L.B)("style")+'" data-lang="'+(0,A.VQ)()+'"></div>\r\n<script src="'+N.Je+'"><\/script>'}return""}function Q(n,t=!1){return t&&(U=!0),(0,a.rH)("source",null,function(n){P=(0,a.gd)("DIV","nx-source-drawer"),U?P.append(function(n){return O("source",M(n,j))}(n)):P.append(function(n){return O("json",M(n,S))}(n),function(n){return O("embed",M(n,$))}(n)),P.style.display="none";var t,e,i=(0,a.gd)("DIV","nx-source-toggle"),o=(t="< />",(e=w("snippets","</>")).addEventListener("click",(()=>{e.textContent==t?(e.textContent="</>",e.classList.remove("nx-active"),(0,r.Vv)(P,200)):(e.textContent=t,e.classList.add("nx-active"),(0,r.YQ)(P,100,(function(){P.scrollIntoView({block:"end",behavior:"smooth",inline:"nearest"})})))})),e);return i.append(o),[i,P]}(n),!1)}var H,R,q,G,T,Y=e(368),_=e(753),F=e(881);function B(n){var t=(0,a.gd)("DIV","nx-boken-media");return t.append(function(n){var t=(0,a.gd)("A","nx-external-link");return t.target="_blank",t.href=n,t.textContent=(0,_.Fj)(n,!0),t}(n)),t}function J(n){var t=(0,a.gd)("A","nx-external-link");return t.href=n,t.target="_blank",t.textContent=(0,_.Fj)(n,!0),t}function K(n){var t=(0,a.gd)("VIDEO");t.setAttribute("controls",!0);var e=(0,a.gd)("SOURCE");return e.src=n,t.append(e),e.onerror=()=>{(0,r.Mo)(t,B(n))},t}function Z(n){var t=(0,a.gd)("AUDIO");return t.setAttribute("controls",!0),t.src=n,t.onerror=()=>{(0,r.Mo)(t,B(n))},t}function z(n){var t=(0,a.gd)("IMG");return t.src=n,t.onerror=()=>{(0,r.Mo)(t,B(n))},t}function W(n){var t=(0,a.gd)("DIV","nx-record-media");return H=(0,a.gd)("DIV"),function(n){n&&n.record.media.type&&function(n,t,e=null){var a={page:J,image:z,video:K,audio:Z},i=function(t){H.className="nx-"+n+"-media",e?(0,r.Mo)(e,t):(0,r.am)(H,t,!1,!0,200)};if(a.hasOwnProperty(n))i(a[n](t));else{var d=(0,o.VG)(t);d?i((0,_.qm)(d)):(0,_.ie)((0,_.ip)(t,n,360)).then((n=>{(0,o.q1)(t,n),i((0,_.qm)(n))})).catch((n=>{(0,F.Pr)(n),i(B(t))}))}}(n.record.media.type,n.record.media.url)}(n),t.append(H,function(n){return ln(n,["record","media","caption"])}(n)),t}var X=[],nn={ctrls:{prev:{symbol:"⊼",elm:null},next:{symbol:"⊻",elm:null}},position:0,count:1};function tn(n){var t=null;return n.threadId&&"/"!=n.threadId&&(t=n.srcData.threads[n.threadIndex]),t}function en(n){return T=(0,a.gd)("DIV"),R=(0,a.gd)("DIV","nx-distant-link"),(0,a.Q$)(nn,on),T.append(nn.ctrls.prev.elm,R,nn.ctrls.next.elm),an(n),(0,a.rH)("distant",null,[T],!0)}function rn(n,t){var e=(0,a.iy)(n,!0);return function(n){(q=(0,a.gd)("DIV","nx-thread-description")).append(ln(n,["description"]))}(t),function(n){(G=(0,a.gd)("DIV","nx-local-record")).append(cn(n))}(t),(0,a.rH)("local",[e],[q,G],!0)}function an(n){(function(n){if(null!=n&&n.linked.length){var t=[],e=[],r=[],o=[];return n.linked.forEach((n=>{if(n.url){var d=(0,i.t$)(n.url,n.id).then((n=>{var i=n.dataUrl+"#"+n.threadId;if(!r.includes(i)){r.push(i);var o=function(n){var t=[u(n,!1),l(n,!1),s(n,!1)],e=(0,a.gd)("DIV");return e.append(...t),e}(n);"/"==n.threadId?e.push(o):(o.append(cn(tn(n))),t.push(o))}})).catch((n=>{(0,F.Pr)(n)}));o.push(d)}})),Promise.all(o).then((()=>{X=t.length||e.length?t.concat(e):[dn()]}))}return Promise.resolve(dn()).then((n=>{X=[n]}))})(n).then((()=>{nn.position=0,nn.count=X.length,(0,a.eV)(nn),on()}))}function on(){var n=X[nn.position],t=R.firstChild;0===nn.position?nn.ctrls.prev.elm.style.visibility="hidden":1===nn.position&&(nn.ctrls.prev.elm.style.visibility="visible");var e=function(){nn.ctrls.next.elm.style.visibility="hidden";var n=null;return nn.position+1!==nn.count&&(n=function(){nn.ctrls.next.elm.style.visibility="visible"}),n}();t?(0,r.Mo)(t,n,e):(0,r.am)(R,n,!1,!0,200,e)}function dn(){var n=(0,a.gd)("DIV");return n.textContent="...",n}function cn(n){var t=(0,a.gd)("DIV","nx-record");return t.append(function(n){var t=(0,a.gd)("DIV","nx-record-meta"),e=ln(n,["record","timestamp"]);return t.append(e),t}(n),function(n){var t=(0,a.gd)("DIV","nx-record-body");return t.append(ln(n,["record","main"]),ln(n,["record","aside"])),t}(n),W(n)),t}function ln(n,t){var e=(0,a.gd)("P","nx-"+t.join("-"));return e.textContent=function(n,t=[]){if(n){for(var e=Object.assign({},n),r=0;r<t.length;r++)e=e[t[r]];if((0,Y.fw)(e))return e}return""}(n,t),e}function sn(n){var t=(0,a.gd)("DIV");t.append(function(n){!function(n){if(D=(0,a.gd)("UL"),n.srcData){var t=n.srcData.index;if(t.length)for(var e=0;e<t.length;e++)D.append(V(n,t[e],e))}(0,i.Ek)((function(n){!function(n){var t=D.childNodes,e=n.srcData.index,a=e.length,i=t.length,o=0;if(i)for(var d=function(n){(0,r.Vv)(n,200,(function(){n.remove()}))},c=0;c<i;c++)if(a>c){var l=V(n,e[c],c);(0,r.Mo)(t[c],l),o++}else d(t[c]);if(o<a)for(var s=o;s<a;s++)(0,r.am)(D,V(n,e[s],s),!1,!0,200)}(n)}),!0)}(n);var t=[c(n,!0),l(n,!0)],e=[k(n),D];return(0,a.rH)("index",t,e,!0)}(n));var e=(0,a.gd)("DIV");return e.append(...function(n){var t=tn(n),e=[rn(n,t),en(t)];return(0,i.Ek)((function(n){!function(n){var t=tn(n),e=cn(t),a=ln(t,["description"]);(0,r.Mo)(q.firstChild,a),(0,r.Mo)(G.firstChild,e),an(t)}(n)})),e}(n)),(0,a._$)([y(n)],[t,e],[Q(n)])}}}]);