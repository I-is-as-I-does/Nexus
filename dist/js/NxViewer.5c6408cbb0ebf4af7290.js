/*! Nexus | (c) 2021 I-is-as-I-does | AGPLv3 license */
"use strict";(self.webpackChunknexus=self.webpackChunknexus||[]).push([[689],{425:(n,t,e)=>{e.d(t,{gd:()=>p,IW:()=>v,_$:()=>f,rH:()=>x,a:()=>h,ao:()=>g,eV:()=>m,Q$:()=>I,Sb:()=>y,I$:()=>D,j1:()=>k,yq:()=>C});var r=e(931),a=e(881),i=e(158),o=e(371),c=e(142),d=e(75),l=e(696);function s(n){var t="/";return n.threadId&&"/"!=n.threadId&&(t=n.srcData.threads[n.threadIndex].title),t}function u(n,t,e){e.dataUrl&&t.dataUrl==e.dataUrl&&t.threadId==e.threadId?n.classList.add("nx-on-display"):n.classList.remove("nx-on-display")}function p(n,t){var e=document.createElement(n);return t&&(e.className=t),e}function v(n){var t,e,r,a=p("DIV","nx-instance");return a.append(((r=p("HEADER")).append(((e=p("A","nx-app-link nx-external-link")).target="_blank",e.href=l.Gd,e.title="Nexus",e.textContent="Nexus",e),((t=p("P")).textContent=(0,d.VQ)(),y((0,d.Ye)(),t,(function(n){(0,c.T)(n)}),"nx-lang-switch"))),r),function(n){var t=p("MAIN");return t.append(...n),t}(n)),a}function f(n,t,e=[],r="viewer"){var a=p("DIV","nx-"+r),i=p("NAV");i.append(...n);var o=p("SECTION");if(o.append(...t),a.append(i,o),e.length){var c=p("FOOTER");c.append(...e),a.append(c)}return a}function x(n,t=null,e=null,r=!1){var a=p("DIV","nx-"+n+" nx-block");if(r&&a.append(h(n)),t){var i=p("DIV","nx-thread-header");i.append(...t),a.append(i)}return e&&a.append(...e),a}function h(n){var t=p("SPAN","nx-landmark nx-landmark-"+n);return t.textContent=(0,d.GY)(n),(0,c.w)(t,n),t}function g(){var n=(0,a.ah)();n.length||(n=["Init failed"]);var t=p("P");(0,i.o)()?t.className="nx-error":(t.style.margin="0 auto",t.style.fontFamily='"Courier New", Courier, monospace',t.style.fontSize="13px");var e=p("BR"),r=p("SPAN");return r.textContent="—/ — ",t.append(r,e),n.forEach((n=>{var r=p("SPAN");r.textContent=(0,d.GY)(n),(0,c.w)(r,n),t.append(r,e.cloneNode())})),t}function m(n){n.position>0?n.ctrls.prev.elm.classList.remove("nx-nav-end"):n.ctrls.prev.elm.classList.add("nx-nav-end"),n.position<n.count-1?n.ctrls.next.elm.classList.remove("nx-nav-end"):n.ctrls.next.elm.classList.add("nx-nav-end")}function I(n,t){Object.keys(n.ctrls).forEach((e=>{n.ctrls[e].elm=p("A","nx-nav-ctrl nx-nav-end"),n.ctrls[e].elm.textContent=n.ctrls[e].symbol,n.ctrls[e].elm.addEventListener("click",(function(){n.ctrls[e].elm.classList.contains("nx-nav-end")||("next"==e?n.position++:n.position--,t(e),m(n))}))}))}function y(n,t,e=null,r=null){var a="nx-selected";t.classList.add("nx-select-toggle");var i,o="INPUT"==t.tagName;o?(t.setAttribute("autocomplete","off"),i=t.value):i=t.textContent;var c=p("UL","nx-select-list"),d=p("DIV","nx-select");return r&&d.classList.add(r),d.append(t,c),t.addEventListener("click",(()=>{var n="none";c.style.display==n&&(n="block"),c.style.display=n})),n.forEach((n=>{var r=p("LI");r.textContent=n,r.dataset.item=n,n==i&&r.classList.add(a),c.append(r),r.addEventListener("click",(()=>{var n=r.textContent;if((o?t.value:t.textContent)!=n){if(!r.classList.contains(a)){var i=c.querySelector(".nx-selected");i&&i.classList.remove(a),r.classList.add(a)}o?t.value=n:t.textContent=n,t.dispatchEvent(new window.Event("change")),"function"==typeof e&&e(n)}c.style.display="none"}))})),c.style.display="none",d}function D(n,t){u(n,t,(0,o.Mq)()),(0,o.Ek)((function(e){u(n,t,e)}))}function k(n,t=!1){var e=p("A","nx-view-link");return e.append(C(n,t)),e}function C(n,t=!1){var e=p("SPAN","nx-thread-title");return e.textContent=s(n),t&&(0,o.Ek)((function(n){var t=s(n);(0,r.Po)(e,t,15)})),e}},220:(n,t,e)=>{e.d(t,{D:()=>un});var r=e(931),a=e(425),i=e(371),o=e(85);function c(n,t){n.classList.contains("nx-on-display")?(n.classList.remove("nx-unseen"),n.lastChild.textContent=""):(0,o.of)(t)&&(n.classList.add("nx-unseen"),n.lastChild.textContent="*")}function d(n,t=!1){var e=(0,a.gd)("SPAN","nx-handle");return n.srcData&&(e.textContent=n.srcData.author.handle),t&&(0,i.Ek)((function(n){(0,r.Po)(e,n.srcData.author.handle,20)}),!0),e}function l(n,t=!1){var e=(0,a.gd)("SPAN","nx-author-url"),c=[];["[","]"].forEach((n=>{var t=(0,a.gd)("SPAN","nx-author-url-brackets");t.textContent=n,c.push(t)}));var d=(0,a.gd)("A","nx-external-link");d.target="_blank";var l="";return n.srcData&&(l=n.srcData.author.url),d.href=l,n.srcData&&(d.textContent=(0,o.KR)(n.srcData.author.url)),e.append(c[0],d,c[1]),t&&(0,i.Ek)((function(n){d.href=n.srcData.author.url,(0,r.Po)(d,(0,o.KR)(n.srcData.author.url),20)}),!0),e}function s(n,t=!1){var e=(0,a.j1)(n,t);return"/"!=n.threadId&&((0,a.I$)(e,n),function(n,t){n.append((0,a.gd)("SPAN","nx-new-tag")),c(n,t),(0,i.Ek)((function(){c(n,t)}))}(e,n)),e.addEventListener("click",(()=>{(0,i.f2)(n)})),e}function u(n,t=!1){var e=(0,a.gd)("A","nx-author-link");e.append(d(n,t));var r={dataUrl:n.dataUrl,srcData:n.srcData,threadId:"/",threadIndex:-1};return e.addEventListener("click",(function(){(0,i.f2)(r,"/")})),e}var p=e(954),v=!1,f=null,x=null,h={dataUrl:null,srcData:null,threadId:"/",threadIndex:-1},g={ctrls:{prev:{symbol:"<",elm:null},next:{symbol:">",elm:null}},position:0,count:1};function m(n){var t=document.createElement("LI");return t.append(...function(n){return[u(n,!1),l(n,!1),I(n)]}(n)),t}function I(n){var t=(0,a.j1)(n,!1);return(0,a.I$)(t,n),t.addEventListener("click",(()=>{v=!0,(0,i.f2)(n,!0),v=!1})),t}function y(n){return function(n){f=(0,a.gd)("UL","nx-history-list");var t=(0,a.gd)("LI");t.textContent="...",f.append(t),n&&n.srcData&&(h=n,f.append(m(n))),(x=(0,a.gd)("DIV","nx-history-drawer")).append(f),x.style.display="none",(0,i.Ek)((function(n){!function(n){if(!v&&(n.dataUrl!=h.dataUrl||n.threadId!=h.threadId)){h=n,g.count>100?f.children[1].remove():g.count++,g.position=g.count-1;var t=m(n);(0,r.am)(f,t,!1,!0,200,(function(){(0,p.SZ)(f)})),(0,a.eV)(g)}}(n)}))}(n),(0,a.rH)("history",null,[(e=(0,a.gd)("DIV","nx-history-nav"),(0,a.Q$)(g,(function(n){var t=g.position;"prev"==n&&(t+=1),f.children[t].querySelector(".nx-thread-title").click()})),e.append(g.ctrls.prev.elm,((t=(0,a.gd)("A","nx-history-toggle")).textContent="≚",t.addEventListener("click",(()=>{"≙"==t.textContent?(t.textContent="≚",t.classList.remove("nx-active"),(0,r.Vv)(x,200)):(t.textContent="≙",t.classList.add("nx-active"),(0,r.YQ)(x,200),(0,p.SZ)(f))})),t),g.ctrls.next.elm),e),x],!1);var t,e}var D=null;function k(n){var t=(0,a.gd)("DIV","nx-about-author");return t.append(C(n)),(0,i.Ek)((function(n){(0,r.Mo)(t.firstChild,C(n))}),!0),t}function C(n){var t=(0,a.gd)("P");return n.srcData&&(t.textContent=n.srcData.author.about),t}function V(n,t,e){var r=Object.assign({},n);r.threadId=t,r.threadIndex=e;var i=(0,a.gd)("LI");return i.append(s(r,!1)),i}var E=e(811),L=e(618),b=e(142),A=e(75),N=e(25),P=null,w=!1;function S(n,t){var e=(0,a.gd)("A","nx-source-"+n);return e.textContent=t,e}function U(n){var t=n.dataUrl;return(0,L.Bq)("edit")&&(t="#temp"),t}function M(n){return n.dataUrl?'{"url": "'+U(n)+'", "id": "'+n.threadId+'"}':""}function O(n,t){var e=(0,a.gd)("TEXTAREA");return e.spellcheck=!1,e.textContent=t(n),(0,i.Ek)((function(n){e.textContent=t(n)})),e}function j(n,t){var e,i,o,c,d,l=(0,a.gd)("DIV","nx-"+n+"-snippet");return l.append(t,(e=t,c=S("copy","⧉"),i=(0,A.GY)("copied"),(o=(0,a.gd)("SPAN","nx-source-copy-tooltip")).textContent=i,o.style.opacity=0,o.hidden=!0,(0,b.w)(o,i),d=o,c.append(d),c.addEventListener("click",(()=>(0,E.vQ)(e.textContent,(()=>{(0,r.Vn)(d,1e3)})))),c)),l}function q(n){if(n.srcData)return JSON.stringify(n.srcData)}function $(n){return n.dataUrl?'<div id="Nexus" data-src="'+U(n)+'" data-id="'+n.threadId+'" data-style="'+(0,L.Bq)("style")+'" data-lang="'+(0,A.VQ)()+'"></div>\r\n<script src="'+N.Je+'"><\/script>':""}function Q(n,t=!1){return t&&(w=!0),(0,a.rH)("source",null,function(n){P=(0,a.gd)("DIV","nx-source-drawer"),w?P.append(function(n){return j("source",O(n,q))}(n)):P.append(function(n){return j("json",O(n,M))}(n),function(n){return j("embed",O(n,$))}(n)),P.style.display="none";var t,e,i=(0,a.gd)("DIV","nx-source-toggle"),o=(t="< />",(e=S("snippets","</>")).addEventListener("click",(()=>{e.textContent==t?(e.textContent="</>",e.classList.remove("nx-active"),(0,r.Vv)(P,200)):(e.textContent=t,e.classList.add("nx-active"),(0,r.YQ)(P,100,(function(){P.scrollIntoView({block:"end",behavior:"smooth",inline:"nearest"})})))})),e);return i.append(o),[i,P]}(n),!1)}var T,H=e(368),R=e(753),G=e(881);function Y(n){var t=(0,a.gd)("DIV","nx-boken-media");return t.append(function(n){var t=(0,a.gd)("A","nx-external-link");return t.target="_blank",t.href=n,t.textContent=(0,R.Fj)(n,!0),t}(n)),t}function _(n){var t=(0,a.gd)("A","nx-external-link");return t.href=n,t.target="_blank",t.textContent=(0,R.Fj)(n,!0),t}function F(n){var t=(0,a.gd)("VIDEO");t.setAttribute("controls",!0);var e=(0,a.gd)("SOURCE");return e.src=n,t.append(e),e.onerror=()=>{(0,r.Mo)(t,Y(n))},t}function B(n){var t=(0,a.gd)("AUDIO");return t.setAttribute("controls",!0),t.src=n,t.onerror=()=>{(0,r.Mo)(t,Y(n))},t}function J(n){var t=(0,a.gd)("IMG");return t.src=n,t.onerror=()=>{(0,r.Mo)(t,Y(n))},t}function K(n){var t=(0,a.gd)("DIV","nx-content-media");return T=(0,a.gd)("DIV"),function(n){n&&n.content.media.type&&function(n,t,e=null){var a={page:_,image:J,video:F,audio:B},i=function(t){T.className="nx-"+n+"-media",e?(0,r.Mo)(e,t):(0,r.am)(T,t,!1,!0,200)};if(a.hasOwnProperty(n))i(a[n](t));else{var c=(0,o.VG)(t);c?i((0,R.qm)(c)):(0,R.ie)((0,R.ip)(t,n,360)).then((n=>{(0,o.q1)(t,n),i((0,R.qm)(n))})).catch((n=>{(0,G.Pr)(n),i(Y(t))}))}}(n.content.media.type,n.content.media.url)}(n),t.append(T,function(n){return sn(n,["content","media","caption"])}(n)),t}e(451);var Z,z,W,X,nn=[],tn={ctrls:{prev:{symbol:"⊼",elm:null},next:{symbol:"⊻",elm:null}},position:0,count:1};function en(n){var t=null;return n.threadId&&"/"!=n.threadId&&(t=n.srcData.threads[n.threadIndex]),t}function rn(n){return X=(0,a.gd)("DIV"),Z=(0,a.gd)("DIV","nx-distant-link"),(0,a.Q$)(tn,cn),X.append(tn.ctrls.prev.elm,Z,tn.ctrls.next.elm),on(n),(0,a.rH)("distant",null,[X],!0)}function an(n,t){var e=(0,a.yq)(n,!0);return function(n){(z=(0,a.gd)("DIV","nx-thread-description")).append(sn(n,["description"]))}(t),function(n){(W=(0,a.gd)("DIV","nx-local-content")).append(ln(n))}(t),(0,a.rH)("local",[e],[z,W],!0)}function on(n){(function(n){if(null!=n&&n.linked.length){var t=[],e=[],r=[],o=[];return n.linked.forEach((n=>{if(n.url){var c=(0,i.t$)(n.url,n.id).then((n=>{var i=n.dataUrl+"#"+n.threadId;if(!r.includes(i)){r.push(i);var o=function(n){var t=[u(n,!1),l(n,!1),s(n,!1)],e=(0,a.gd)("DIV");return e.append(...t),e}(n);"/"==n.threadId?e.push(o):(o.append(ln(en(n))),t.push(o))}})).catch((n=>{(0,G.Pr)(n)}));o.push(c)}})),Promise.all(o).then((()=>{nn=t.length||e.length?t.concat(e):[dn()]}))}return Promise.resolve(dn()).then((n=>{nn=[n]}))})(n).then((()=>{tn.position=0,tn.count=nn.length,(0,a.eV)(tn),cn()}))}function cn(){var n=nn[tn.position],t=Z.firstChild;0===tn.position?tn.ctrls.prev.elm.style.visibility="hidden":1===tn.position&&(tn.ctrls.prev.elm.style.visibility="visible");var e=function(){tn.ctrls.next.elm.style.visibility="hidden";var n=null;return tn.position+1!==tn.count&&(n=function(){tn.ctrls.next.elm.style.visibility="visible"}),n}();t?(0,r.Mo)(t,n,e):(0,r.am)(Z,n,!1,!0,200,e)}function dn(){var n=(0,a.gd)("DIV");return n.textContent="...",n}function ln(n){var t=(0,a.gd)("DIV","nx-content");return t.append(function(n){var t=(0,a.gd)("DIV","nx-content-meta"),e=sn(n,["content","timestamp"]);return t.append(e),t}(n),function(n){var t=(0,a.gd)("DIV","nx-content-body");return t.append(sn(n,["content","main"]),sn(n,["content","aside"])),t}(n),K(n)),t}function sn(n,t){var e=(0,a.gd)("P","nx-"+t.join("-"));return e.textContent=function(n,t=[]){if(n){for(var e=Object.assign({},n),r=0;r<t.length;r++)e=e[t[r]];if((0,H.fw)(e))return t.includes("timestamp")&&e.includes("T")&&(e=e.replace("T"," ")),e}return""}(n,t),e}function un(n){var t=(0,a.gd)("DIV");t.append(function(n){!function(n){if(D=(0,a.gd)("UL"),n.srcData){var t=n.srcData.index;if(t.length)for(var e=0;e<t.length;e++)D.append(V(n,t[e],e))}(0,i.Ek)((function(n){!function(n){var t=D.childNodes,e=n.srcData.index,a=e.length,i=t.length,o=0;if(i)for(var c=function(n){(0,r.Vv)(n,200,(function(){n.remove()}))},d=0;d<i;d++)if(a>d){var l=V(n,e[d],d);(0,r.Mo)(t[d],l),o++}else c(t[d]);if(o<a)for(var s=o;s<a;s++)(0,r.am)(D,V(n,e[s],s),!1,!0,200)}(n)}),!0)}(n);var t=[d(n,!0),l(n,!0)],e=[k(n),D];return(0,a.rH)("index",t,e,!0)}(n));var e=(0,a.gd)("DIV");return e.append(...function(n){var t=en(n),e=[an(n,t),rn(t)];return(0,i.Ek)((function(n){!function(n){var t=en(n),e=ln(t),a=sn(t,["description"]);(0,r.Mo)(z.firstChild,a),(0,r.Mo)(W.firstChild,e),on(t)}(n)})),e}(n)),[(0,a._$)([y(n)],[t,e],[Q(n)])]}}}]);