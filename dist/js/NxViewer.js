/*! Nexus | (c) 2021 I-is-as-I-does | AGPLv3 license */
"use strict";(self.webpackChunknexus=self.webpackChunknexus||[]).push([[689],{425:(n,t,e)=>{e.d(t,{gd:()=>v,IW:()=>f,_$:()=>x,rH:()=>h,a:()=>g,ao:()=>m,eV:()=>I,Q$:()=>y,Sb:()=>D,I$:()=>k,j1:()=>C,yq:()=>V});var r=e(931),a=e(881),i=e(158),o=e(371),c=e(142),d=e(75),l=e(696);function s(n){var t="/";return n.threadId&&"/"!=n.threadId&&(t=n.srcData.threads[n.threadIndex].title),t}function u(n,t,e){e.dataUrl&&t.dataUrl==e.dataUrl&&t.threadId==e.threadId?n.classList.add("nx-on-display"):n.classList.remove("nx-on-display")}function p(){var n,t,e=v("HEADER");return e.append(((t=v("A","nx-app-link nx-external-link")).target="_blank",t.href=l.Gd,t.title="Nexus",t.textContent="Nexus",t),((n=v("P")).textContent=(0,d.VQ)(),D((0,d.Ye)(),n,(function(n){(0,c.T)(n)}),"nx-lang-switch"))),e}function v(n,t){var e=document.createElement(n);return t&&(e.className=t),e}function f(n){var t=v("DIV","nx-instance");return t.append(p(),function(n){var t=v("MAIN");return t.append(...n),t}(n)),t}function x(n,t,e=[],r="viewer"){var a=v("DIV","nx-"+r),i=v("NAV");i.append(...n);var o=v("SECTION");if(o.append(...t),a.append(i,o),e.length){var c=v("FOOTER");c.append(...e),a.append(c)}return a}function h(n,t=null,e=null,r=!1){var a=v("DIV","nx-"+n+" nx-block");if(r&&a.append(g(n)),t){var i=v("DIV","nx-thread-header");i.append(...t),a.append(i)}return e&&a.append(...e),a}function g(n){var t=v("SPAN","nx-landmark nx-landmark-"+n.replace(" ","-"));return t.textContent=(0,d.GY)(n),(0,c.w)(t,n),t}function m(){var n=(0,a.ah)();n.length||(n=["Init failed"]);var t=v("P");(0,i.o)()?t.className="nx-error":(t.style.margin="0 auto",t.style.fontFamily='"Courier New", Courier, monospace',t.style.fontSize="13px");var e=v("BR"),r=v("SPAN");return r.textContent="—/ — ",t.append(r,e),n.forEach((n=>{var r=v("SPAN");r.textContent=(0,d.GY)(n),(0,c.w)(r,n),t.append(r,e.cloneNode())})),t}function I(n){n.position>0?n.ctrls.prev.elm.classList.remove("nx-nav-end"):n.ctrls.prev.elm.classList.add("nx-nav-end"),n.position<n.count-1?n.ctrls.next.elm.classList.remove("nx-nav-end"):n.ctrls.next.elm.classList.add("nx-nav-end")}function y(n,t){Object.keys(n.ctrls).forEach((e=>{n.ctrls[e].elm=v("A","nx-nav-ctrl nx-nav-end"),n.ctrls[e].elm.textContent=n.ctrls[e].symbol,n.ctrls[e].elm.addEventListener("click",(function(){n.ctrls[e].elm.classList.contains("nx-nav-end")||("next"==e?n.position++:n.position--,t(e),I(n))}))}))}function D(n,t,e=null,r=null){var a="nx-selected";t.classList.add("nx-select-toggle");var i,o="INPUT"==t.tagName;o?(t.setAttribute("autocomplete","off"),i=t.value):i=t.textContent;var c=v("UL","nx-select-list"),d=v("DIV","nx-select");return r&&d.classList.add(r),d.append(t,c),t.addEventListener("click",(()=>{var n="none";c.style.display==n&&(n="block"),c.style.display=n})),n.forEach((n=>{var r=v("LI");r.textContent=n,r.dataset.item=n,n==i&&r.classList.add(a),c.append(r),r.addEventListener("click",(()=>{var n=r.textContent;if((o?t.value:t.textContent)!=n){if(!r.classList.contains(a)){var i=c.querySelector(".nx-selected");i&&i.classList.remove(a),r.classList.add(a)}o?t.value=n:t.textContent=n,t.dispatchEvent(new window.Event("change")),"function"==typeof e&&e(n)}c.style.display="none"}))})),c.style.display="none",d}function k(n,t){u(n,t,(0,o.Mq)()),(0,o.Ek)((function(e){u(n,t,e)}))}function C(n,t=!1){var e=v("A","nx-view-link");return e.append(V(n,t)),e}function V(n,t=!1){var e=v("SPAN","nx-thread-title");return e.textContent=s(n),t&&(0,o.Ek)((function(n){var t=s(n);(0,r.Po)(e,t,15)})),e}},220:(n,t,e)=>{e.d(t,{D:()=>mn});var r=e(931),a=e(425),i=e(371),o=e(85);function c(n,t){n.classList.contains("nx-on-display")?(n.classList.remove("nx-unseen"),n.lastChild.textContent=""):(0,o.of)(t)&&(n.classList.add("nx-unseen"),n.lastChild.textContent="*")}function d(n,t=!1){var e=(0,a.gd)("SPAN","nx-handle");return n.srcData&&(e.textContent=n.srcData.author.handle),t&&(0,i.Ek)((function(n){(0,r.Po)(e,n.srcData.author.handle,20)}),!0),e}function l(n,t=!1){var e=(0,a.gd)("SPAN","nx-author-url"),c=[];["[","]"].forEach((n=>{var t=(0,a.gd)("SPAN","nx-author-url-brackets");t.textContent=n,c.push(t)}));var d=(0,a.gd)("A","nx-external-link");d.target="_blank";var l="";return n.srcData&&(l=n.srcData.author.url),d.href=l,n.srcData&&(d.textContent=(0,o.KR)(n.srcData.author.url)),e.append(c[0],d,c[1]),t&&(0,i.Ek)((function(n){d.href=n.srcData.author.url,(0,r.Po)(d,(0,o.KR)(n.srcData.author.url),20)}),!0),e}function s(n,t=!1){var e=(0,a.j1)(n,t);return"/"!=n.threadId&&((0,a.I$)(e,n),function(n,t){n.append((0,a.gd)("SPAN","nx-new-tag")),c(n,t),(0,i.Ek)((function(){c(n,t)}))}(e,n)),e.addEventListener("click",(()=>{(0,i.f2)(n)})),e}function u(n,t=!1){var e=(0,a.gd)("A","nx-author-link");e.append(d(n,t));var r={dataUrl:n.dataUrl,srcData:n.srcData,threadId:"/",threadIndex:-1};return e.addEventListener("click",(function(){(0,i.f2)(r,"/")})),e}var p=e(954);var v=!1,f=null,x=null,h={dataUrl:null,srcData:null,threadId:"/",threadIndex:-1},g={ctrls:{prev:{symbol:"<",elm:null},next:{symbol:">",elm:null}},position:0,count:1};function m(){var n,t=(0,a.gd)("DIV","nx-history-nav");return(0,a.Q$)(g,(function(n){var t=g.position;"prev"==n&&(t+=1),f.children[t].querySelector(".nx-thread-title").click()})),t.append(g.ctrls.prev.elm,((n=(0,a.gd)("A","nx-history-toggle")).textContent="≚",n.addEventListener("click",(()=>{"≙"==n.textContent?(n.textContent="≚",n.classList.remove("nx-active"),(0,r.Vv)(x,200)):(n.textContent="≙",n.classList.add("nx-active"),(0,r.YQ)(x,200),(0,p.SZ)(f))})),n),g.ctrls.next.elm),t}function I(n){f=(0,a.gd)("UL","nx-history-list");var t=(0,a.gd)("LI");t.textContent="...",f.append(t),n&&n.srcData&&(h=n,f.append(y(n))),(x=(0,a.gd)("DIV","nx-history-drawer")).append(f),x.style.display="none",(0,i.Ek)((function(n){!function(n){if(!v&&(n.dataUrl!=h.dataUrl||n.threadId!=h.threadId)){h=n,g.count>100?f.children[1].remove():g.count++,g.position=g.count-1;var t=y(n);(0,r.am)(f,t,!1,!0,200,(function(){(0,p.SZ)(f)})),(0,a.eV)(g)}}(n)}))}function y(n){var t=document.createElement("LI");return t.append(...function(n){return[u(n,!1),l(n,!1),D(n)]}(n)),t}function D(n){var t=(0,a.j1)(n,!1);return(0,a.I$)(t,n),t.addEventListener("click",(()=>{v=!0,(0,i.f2)(n,!0),v=!1})),t}function k(n){return I(n),(0,a.rH)("history",null,[m(),x],!1)}var C=null;function V(n){var t=(0,a.gd)("DIV","nx-about-author");return t.append(E(n)),(0,i.Ek)((function(n){(0,r.Mo)(t.firstChild,E(n))}),!0),t}function E(n){var t=(0,a.gd)("P");return n.srcData&&(t.textContent=n.srcData.author.about),t}function L(n){if(C=(0,a.gd)("UL"),n.srcData){var t=n.srcData.index;if(t.length)for(var e=0;e<t.length;e++)C.append(b(n,t[e],e))}(0,i.Ek)((function(n){!function(n){var t=C.childNodes,e=n.srcData.index,a=e.length,i=t.length,o=0;if(i)for(var c=function(n){(0,r.Vv)(n,200,(function(){n.remove()}))},d=0;d<i;d++)if(a>d){var l=b(n,e[d],d);(0,r.Mo)(t[d],l),o++}else c(t[d]);if(o<a)for(var s=o;s<a;s++)(0,r.am)(C,b(n,e[s],s),!1,!0,200)}(n)}),!0)}function b(n,t,e){var r=Object.assign({},n);r.threadId=t,r.threadIndex=e;var i=(0,a.gd)("LI");return i.append(s(r,!1)),i}var A=e(811),N=e(618),P=e(142),w=e(75),S=e(25),U=null,M=!1;function O(n,t){var e=(0,a.gd)("A","nx-source-"+n);return e.textContent=t,e}function j(n){var t=n.dataUrl;return(0,N.Bq)("edit")&&(t="#temp"),t}function q(n){return n.dataUrl?'{"url": "'+j(n)+'", "id": "'+n.threadId+'"}':""}function $(n){U=(0,a.gd)("DIV","nx-source-drawer"),M?U.append(function(n){return H("source",Q(n,R))}(n)):U.append(function(n){return H("json",Q(n,q))}(n),function(n){return H("embed",Q(n,G))}(n)),U.style.display="none";var t,e,i=(0,a.gd)("DIV","nx-source-toggle"),o=(t="< />",(e=O("snippets","</>")).addEventListener("click",(()=>{e.textContent==t?(e.textContent="</>",e.classList.remove("nx-active"),(0,r.Vv)(U,200)):(e.textContent=t,e.classList.add("nx-active"),(0,r.YQ)(U,100,(function(){U.scrollIntoView({block:"end",behavior:"smooth",inline:"nearest"})})))})),e);return i.append(o),[i,U]}function Q(n,t){var e=(0,a.gd)("TEXTAREA");return e.spellcheck=!1,e.textContent=t(n),(0,i.Ek)((function(n){e.textContent=t(n)})),e}function T(n){var t,e,i,o=O("copy","⧉"),c=(t="nx-source-copy-tooltip",e=(0,w.GY)("copied"),(i=(0,a.gd)("SPAN",t)).textContent=e,i.style.opacity=0,i.hidden=!0,(0,P.w)(i,e),i);return o.append(c),o.addEventListener("click",(()=>(0,A.vQ)(n.textContent,(()=>{(0,r.Vn)(c,1e3)})))),o}function H(n,t){var e=(0,a.gd)("DIV","nx-"+n+"-snippet");return e.append(t,T(t)),e}function R(n){if(n.srcData)return JSON.stringify(n.srcData)}function G(n){return n.dataUrl?'<div id="Nexus" data-src="'+j(n)+'" data-id="'+n.threadId+'" data-style="'+(0,N.Bq)("style")+'" data-lang="'+(0,w.VQ)()+'"></div>\r\n<script src="'+S.Je+'"><\/script>':""}function Y(n,t=!1){return t&&(M=!0),(0,a.rH)("source",null,$(n),!1)}var _,F=e(368),B=e(753),J=e(881);function K(n){n&&n.content.media.type&&function(n,t,e=null){var a={page:z,image:nn,video:W,audio:X},i=function(t){_.className="nx-"+n+"-media",e?(0,r.Mo)(e,t):(0,r.am)(_,t,!1,!0,200)};if(a.hasOwnProperty(n))i(a[n](t));else{var c=(0,o.VG)(t);c?i((0,B.qm)(c)):(0,B.ie)((0,B.ip)(t,n,360)).then((n=>{(0,o.q1)(t,n),i((0,B.qm)(n))})).catch((n=>{(0,J.Pr)(n),i(Z(t))}))}}(n.content.media.type,n.content.media.url)}function Z(n){var t=(0,a.gd)("DIV","nx-boken-media");return t.append(function(n){var t=(0,a.gd)("A","nx-external-link");return t.target="_blank",t.href=n,t.textContent=(0,B.Fj)(n,!0),t}(n)),t}function z(n){var t=(0,a.gd)("A","nx-external-link");return t.href=n,t.target="_blank",t.textContent=(0,B.Fj)(n,!0),t}function W(n){var t=(0,a.gd)("VIDEO");t.setAttribute("controls",!0);var e=(0,a.gd)("SOURCE");return e.src=n,t.append(e),e.onerror=()=>{(0,r.Mo)(t,Z(n))},t}function X(n){var t=(0,a.gd)("AUDIO");return t.setAttribute("controls",!0),t.src=n,t.onerror=()=>{(0,r.Mo)(t,Z(n))},t}function nn(n){var t=(0,a.gd)("IMG");return t.src=n,t.onerror=()=>{(0,r.Mo)(t,Z(n))},t}function tn(n){var t=(0,a.gd)("DIV","nx-content-media");return _=(0,a.gd)("DIV"),K(n),t.append(_,function(n){return hn(n,["content","media","caption"])}(n)),t}e(451);var en,rn,an,on,cn=[],dn={ctrls:{prev:{symbol:"⊼",elm:null},next:{symbol:"⊻",elm:null}},position:0,count:1};function ln(n){var t=null;return n.threadId&&"/"!=n.threadId&&(t=n.srcData.threads[n.threadIndex]),t}function sn(n){return on=(0,a.gd)("DIV"),en=(0,a.gd)("DIV","nx-distant-link"),(0,a.Q$)(dn,vn),on.append(dn.ctrls.prev.elm,en,dn.ctrls.next.elm),pn(n),(0,a.rH)("distant",null,[on],!0)}function un(n,t){var e=(0,a.yq)(n,!0);return function(n){(rn=(0,a.gd)("DIV","nx-thread-description")).append(hn(n,["description"]))}(t),function(n){(an=(0,a.gd)("DIV","nx-local-content")).append(xn(n))}(t),(0,a.rH)("local",[e],[rn,an],!0)}function pn(n){(function(n){if(null!=n&&n.linked.length){var t=[],e=[],r=[],o=[];return n.linked.forEach((n=>{if(n.url){var c=(0,i.t$)(n.url,n.id).then((n=>{var i=n.dataUrl+"#"+n.threadId;if(!r.includes(i)){r.push(i);var o=function(n){var t=[u(n,!1),l(n,!1),s(n,!1)],e=(0,a.gd)("DIV");return e.append(...t),e}(n);"/"==n.threadId?e.push(o):(o.append(xn(ln(n))),t.push(o))}})).catch((n=>{(0,J.Pr)(n)}));o.push(c)}})),Promise.all(o).then((()=>{cn=t.length||e.length?t.concat(e):[fn()]}))}return Promise.resolve(fn()).then((n=>{cn=[n]}))})(n).then((()=>{dn.position=0,dn.count=cn.length,(0,a.eV)(dn),vn()}))}function vn(){var n=cn[dn.position],t=en.firstChild;0===dn.position?dn.ctrls.prev.elm.style.visibility="hidden":1===dn.position&&(dn.ctrls.prev.elm.style.visibility="visible");var e=function(){dn.ctrls.next.elm.style.visibility="hidden";var n=null;return dn.position+1!==dn.count&&(n=function(){dn.ctrls.next.elm.style.visibility="visible"}),n}();t?(0,r.Mo)(t,n,e):(0,r.am)(en,n,!1,!0,200,e)}function fn(){var n=(0,a.gd)("DIV");return n.textContent="...",n}function xn(n){var t=(0,a.gd)("DIV","nx-content");return t.append(function(n){var t=(0,a.gd)("DIV","nx-content-meta"),e=hn(n,["content","timestamp"]);return t.append(e),t}(n),function(n){var t=(0,a.gd)("DIV","nx-content-body");return t.append(hn(n,["content","main"]),hn(n,["content","aside"])),t}(n),tn(n)),t}function hn(n,t){var e=(0,a.gd)("P","nx-"+t.join("-"));return e.textContent=function(n,t=[]){if(n){for(var e=Object.assign({},n),r=0;r<t.length;r++)e=e[t[r]];if((0,F.fw)(e))return t.includes("timestamp")&&e.includes("T")&&(e=e.replace("T"," ")),e}return""}(n,t),e}function gn(n){var t=ln(n),e=[un(n,t),sn(t)];return(0,i.Ek)((function(n){!function(n){var t=ln(n),e=xn(t),a=hn(t,["description"]);(0,r.Mo)(rn.firstChild,a),(0,r.Mo)(an.firstChild,e),pn(t)}(n)})),e}function mn(n){var t=(0,a.gd)("DIV");t.append(function(n){L(n);var t=[d(n,!0),l(n,!0)],e=[V(n),C];return(0,a.rH)("index",t,e,!0)}(n));var e=(0,a.gd)("DIV");return e.append(...gn(n)),[(0,a._$)([k(n)],[t,e],[Y(n)])]}}}]);