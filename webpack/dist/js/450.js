/*! For license information please see 450.js.LICENSE.txt */
"use strict";(self.webpackChunknexus=self.webpackChunknexus||[]).push([[450],{450:(e,t,n)=>{n.d(t,{gd:()=>a,IW:()=>l,rH:()=>u,ao:()=>s});var r=n(995),i=n(146),o=n(406);function a(e,t){var n=document.createElement(e);return t&&(n.className=t),n}function l(e,t,n){var r=a("DIV","nx-instance"),i=a("HEADER");i.append(...e);var o=a("MAIN");o.append(...t);var l=a("FOOTER");return l.append(...n),r.append(i,o,l),r}function u(e,t=null,n=null,o=!1){var l,u,s=a("SECTION","nx-"+e+"  nx-block");if(o&&s.append(((u=a("SPAN","nx-landmark nx-landmark-"+(l=e))).textContent=(0,r.GY)(l),(0,i.wu)(u,l),u)),t){var d=a("HEADER");d.append(...t),s.append(d)}return n&&s.append(...n),s}function s(){var e=(0,o.vf)();e.length||(e=["Init failed"]);var t=a("P");(0,o.Mj)()?t.className="nx-error":(t.style.margin="0 auto",t.style.fontFamily='"Courier New", Courier, monospace',t.style.fontSize="13px");var n=a("BR"),l=a("SPAN");return l.textContent="—/ — ",t.append(l,n),e.forEach((e=>{var o=a("SPAN");o.textContent=(0,r.GY)(e),(0,i.wu)(o,e),t.append(o,n.cloneNode())})),t}},504:(e,t,n)=>{function r(){return l("localStorage")?localStorage:null}function i(){return l("sessionStorage")?sessionStorage:null}function o(e,t=!0){var n,r=(n=JSON.stringify(e),(new TextEncoder).encode(n).length);return t&&(r/=1e3),r}function a(e,t=null,n=2e3){null==t&&(t=o(e,!0));for(var r=0;r<e.length;r++){var i=e.key(r),a=o(e.getItem(i),!0);if(e.removeItem(i),(t+=a)>n)break}}function l(e){var t;try{t=window[e];var n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}function u(e,t){navigator.clipboard.writeText(e).then((()=>t()))}n.d(t,{$o:()=>r,G:()=>i,$w:()=>o,hh:()=>a,vQ:()=>u})},789:(e,t,n)=>{function r(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}function i(e){return fetch(e).then((e=>e.json()))}function o(e,t,n=null,r=null){t=t.toLowerCase();var i={youtube:"https://youtube.com/oembed?url=",vimeo:"https://vimeo.com/api/oembed.json?url=",soundcloud:"https://soundcloud.com/oembed?format=json&url="};return!!i.hasOwnProperty(t)&&(e=i[t]+encodeURIComponent(e),null!=n&&(e+="&maxwidth="+n),null!=r&&(e+="&maxheight="+r),e)}function a(e){return i(e).then((e=>{if(e&&e.hasOwnProperty("html")){var t=e.html.split('src="')[1].split('"')[0],n=document.createElement("IFRAME");return n.width=e.width,n.height=e.height,n.frameborder="no",n.scrolling="no",n.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",n.allowfullscreen=!0,n.title=e.title,n.src=t,n}throw"invalid oembed response"}))}function l(e){return e.split(/[\\/]/).pop()}function u(e,t,n=null){return n||!function(e,t){if(document.styleSheets.length)for(var n=l(t),r=0;r<document.styleSheets.length;r++){var i=document.styleSheets[r].href;if(i){if(i==t||l(i)==n)return!0;if(i.startsWith(window.location.origin)){var o=document.styleSheets[r].cssRules;for(let t=0;t<o.length;t++)if(o[t].selectorText==e)return!0}}}return!1}(e,t)?new Promise(((e,r)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onload=e,i.onerror=r,i.href=t,n?n.append(i):document.head.append(i)})):Promise.resolve(!0)}function s(e,t=!0){var n=e.replace(/^(https?:\/\/)?/,"").split("/");if(e=n[0],t&&n.length>1){n.length>2&&(e+="/...");var r=n.pop();r.length>18&&(r="..."+r.substr(-15)),e+="/"+r}return e}function d(e){for(var t=e.replace(/^(https?:\/\/)?(www.)?/,"").split(":")[0].split("/")[0].split("."),n=0;n<t.length;n++)if(t[n].includes("-"))t[n]=t[n].split("-").map((e=>e[0])).join("-");else{for(var r=t[n].split(""),i=0,o=0;o<r.length;o++)["a","e","i","o","u","y"].includes(r[o])&&(0!==i&&o!==i+1?r[o]="":i=o);t[n]=r.join("")}return t.join(".")}n.d(t,{HH:()=>r,_l:()=>i,ip:()=>o,qm:()=>a,Yc:()=>u,Fj:()=>s,AB:()=>d})},931:(e,t,n)=>{function r(e,t=200,n=null){f(e);let r=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.boxSizing="border-box",e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=r+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),"function"==typeof n&&n()}),t)}function i(e,t=null){e.style.opacity=1,function n(){(e.style.opacity-=.1)<0?(e.style.display="none","function"==typeof t&&t()):requestAnimationFrame(n)}()}function o(e,t=null){e.style.opacity=0,f(e),function n(){var r=parseFloat(e.style.opacity);(r+=.1)>1?"function"==typeof t&&t():(e.style.opacity=r,requestAnimationFrame(n))}()}function a(e,t=200,n=null){var r=[i,o];(function(e){if(!e)return!1;do{if(e instanceof Element){if(e.hidden||!e.offsetHeight)return!0;var t=window.getComputedStyle(e);if("0"==t.width||"0"==t.height||"0"==t.opacity||"none"==t.display||"hidden"==t.visibility)return!0}}while(e=e.parentNode);return!1})(e)&&r.reverse(),r[0](e,(function(){"function"==typeof n&&n(),window.setTimeout((()=>{r[1](e)}),t)}))}function l(e,t=200,n=null){i(e),function(e,t=200,n=null){e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.boxSizing="border-box",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),"function"==typeof n&&n()}),t)}(e,t,n)}function u(e,t=200,n=null){e.style.opacity=0;var i=t-200;i<200&&(i=200),setTimeout((function(){o(e,n)}),i),r(e,t,n)}function s(e,t,n=20){var r,i,o,a=e.textContent.split(""),l=t.split(""),u=a.length,s=l.length;u>s?(r=u,i=0,o=function(){r>s?a.pop():a[r-1]=l[r-1],r--}):(r=0,i=s,o=function(){r<u?a[r]=l[r]:a.push(l[r]),r++});var d=setInterval((function(){o(),e.textContent=a.join(""),r==i&&clearInterval(d)}),n)}function d(e,t,n=!1,i=!0,o=200,a=null){var l,s;return t.style.display="none",i?(t.style.opacity=0,l=u):l=r,s=n?function(){e.prepend(t)}:function(){e.append(t)},p(e,t,s,(function(){l(t,o,a)}))}function c(e,t,n=null){t.style.opacity=0;var r=e.parentNode,a=e.offsetHeight,l=function(){e.replaceWith(t)},s=function(){var e=t.offsetHeight;!function(e,t,n,r=null){t===n?o(e,r):u(e,200,r)}(t,a,e,n)};i(e,(function(){p(r,t,l,s)}))}function p(e,t,n,r=null){e instanceof Element||(e=document.body);var i="m"+Math.random().toString(20).substr(2);return t.classList.add(i),new Promise((o=>{var a=new MutationObserver((()=>{e.querySelector("."+i)&&(t.classList.remove(i),a.disconnect(),"function"==typeof r&&r(),o(!0))}));a.observe(e,{childList:!0}),n()}))}function f(e){e.style.removeProperty("display");let t=window.getComputedStyle(e).display;"none"===t&&(t="block"),e.style.display=t}n.d(t,{Vn:()=>a,Vv:()=>l,YQ:()=>u,Po:()=>s,am:()=>d,Mo:()=>c})},406:(e,t,n)=>{n.d(t,{ZO:()=>m,vf:()=>p,Mj:()=>h,As:()=>v,Kz:()=>f,MD:()=>y,cY:()=>g});var r=n(789);var i=n(950),o=n(995),a=[],l={src:null,id:"/",style:"https://cdn.jsdelivr.net/gh/I-is-as-I-does/Nexus-Prototype@latest/cdn/css/NexusI.css",lang:"en"},u=null,s=!1,d=!1;function c(e){var t;(0,r.HH)(e.src)&&(l.src=e.src,(0,i.Q0)(e.id)&&(l.id=e.id)),(0,r.HH)(e.style)&&(l.style=e.style),("string"==typeof(t=e.lang)||t instanceof String)&&t.length&&(l.lang=e.lang)}function p(){return a}function f(e){d&&console.log(e)}function h(){return s}function m(){return u}function y(e){return l[e]}function v(e=null){return e||(e=l.style),(0,r.Yc)(".nexus",e,u).then((()=>(s=!0,!0))).catch((e=>{throw f(e),a.push("Theme not found"),404}))}function g(e=null,t=null,n=!1){return d=n,null!=u?(a.push("Instance already initiated"),!1):(function(e){e||(e="#Nexus"),(u=document.querySelector(e))||(u=document.createElement("DIV"),document.body.append(u))}(e),null!==(r=t)&&"Object"==r.constructor.name&&Object.keys(r).length?c(t):u.dataset&&c(u.dataset),(0,o.uM)(l.lang),u.classList.add("nexus"),u=u.attachShadow({mode:"open"}),!0);var r}document.cookie="Nx=Instance; SameSite=None; Secure"},683:(e,t,n)=>{n.d(t,{pH:()=>c,$3:()=>p,Dy:()=>f,Yb:()=>h});var r=n(504),i={},o={},a=(0,r.$o)(),l=(0,r.G)();function u(e){e&&!e.getItem("available")&&e.setItem("available",5e3)}function s(e){if(-1!=e.threadIndex){var t=e.srcData.threads[e.threadIndex].record.timestamp;return new Date(t)}return null}function d(e,t,n){if(null!=e){var i=(0,r.$w)(n,!0);if(i>2e3)return;var o=e.getItem("available");o<100&&(0,r.hh)(e,o,2e3),o-=i,e.setItem(t,JSON.stringify(n)),e.setItem("available",o)}}function c(e,t){o[e]=t,d(l,e,t)}function p(e){var t=function(e){var t,n=e.dataUrl+"#"+e.threadId;return i.hasOwnProperty(n)?t=i[n]:a&&(t=a.getItem(n)),t?new Date(t):null}(e);if(!t)return!0;var n=s(e);return!n||t==n}function f(e){var t=e.dataUrl+"#"+e.threadId;if(!i.hasOwnProperty(t)){var n=s(e);n&&(i[t]=n,d(a,t,n))}}function h(e){if(o.hasOwnProperty(e))return o[e];if(l){var t=l.getItem(e);if(t)return JSON.parse(t)}return null}u(a),u(l)},146:(e,t,n)=>{n.d(t,{t$:()=>h,wu:()=>m,Ek:()=>y,f2:()=>v,To:()=>g,Mq:()=>I,qg:()=>b,rz:()=>w});var r=n(789),i=n(931),o=n(683),a=n(950),l=n(995),u={dataUrl:null,srcData:null,threadId:"/",threadIndex:-1,lastEvent:null},s={},d={onChange:[],onSrcChange:[]},c=!1,p=!1;function f(e,t){(0,i.Po)(e,(0,l.GY)(t),50)}function h(e,t){return function(e){var t=(0,o.Yb)(e);return null!==t?Number.isInteger(t)?Promise.reject(t):Promise.resolve(t):function(e){return(0,r._l)(e).then((t=>((0,a.IM)(),(t=(0,a.gV)(t))?(function(e){e.index=[],e.threads.map((t=>{e.index.push(t.id)})),e.author.miniUrl=(0,r.AB)(e.author.url)}(t),(0,o.pH)(e,t),t):((0,o.pH)(e,400),logEvent(getLogs()),addErrMsg("Invalid source"),Promise.reject(400))))).catch((t=>{throw logEvent(t),(0,o.pH)(e,404),addErrMsg("No response"),404}))}(e)}(e).then((n=>{var r={dataUrl:e,threadId:t,srcData:n,threadIndex:n.index.indexOf(t),lastEvent:"read"};return-1===r.threadIndex&&"/"!==t&&(r.threadId="/"),r}))}function m(e,t){s[t]||(s[t]=[]),s[t].push(e)}function y(e,t=!1){var n="onChange";t&&(n="onSrcChange"),d[n].push(e)}function v(e,t=!1){if(!c){var n=e.dataUrl!=u.dataUrl;(n||e.threadId!=u.threadId)&&(c=!0,t||((0,o.Dy)(u),p&&(r={id:u.threadId,src:u.dataUrl,ix:u.threadIndex,ev:u.lastEvent},history.replaceState(r,""),history.pushState(r,""))),u=e,function(e){var t=["onChange"];e&&t.push("onSrcChange"),t.forEach((e=>{d[e].length&&d[e].forEach((e=>{e(u)}))}))}(n),function(){setTimeout(function(){c=!1}.bind(this),800)}())}var r}function g(e){if((0,l.FC)(e))for(let[e,t]of Object.entries(s))t.forEach((t=>{f(t,e)}))}function I(){return u}function b(){p||(p=!0,window.onpopstate=e=>{if(e.state&&e.state.src&&e.state.id&&e.state.ix&&e.state.ev){var t=e.state;t.srcData=(0,o.Yb)(e.state.src),v(t,!1)}})}function w(e){return u.dataUrl?(addErrMsg("Origin state already set"),!1):(u=e,!0)}},950:(e,t,n)=>{n.d(t,{Gd:()=>s,Q0:()=>g,IM:()=>p,gV:()=>x});var r=n(null),i=n(789),o=[];function a(e,t=null){var n={msg:e};(0,r.fw)(t)&&(n.detail=t),o.push(n)}const l={handle:[3,30],about:[0,400],name:[3,30],description:[0,400],main:[1,1e3],aside:[0,400],caption:[0,200]},u={threads:[1,100],linked:[0,100]},s="https://github.com/I-is-as-I-does/Nexus-Prototype",d=["page","video","image","audio","youtube","vimeo","soundcloud"],c={data:"Object",nexus:"String",author:"Object",handle:"String",about:"String",url:"String",threads:"Array","threads.item":"Object",id:"String",name:"String",description:"String",record:"Object",timestamp:"String",main:"String",aside:"String",media:"Object",type:"String",caption:"String",linked:"Array","linked.item":"Object"};function p(){o=[]}function f(e){return l.hasOwnProperty(e)?l[e]:(a("Unknown characters limits category",e),!1)}function h(e){return u.hasOwnProperty(e)?u[e]:(a("Unknown items limits category",e),!1)}function m(e,t){return y(e,t,!0)||(e=""),function(e,t){var n=f(t);if(!1!==n){if(e.length>=n[0])return!0;a("Invalid min length",t)}return!1}(e,t)?function(e,t){var n=f(t);if(!1!==n){if(e.length<=n[1])return!0;a("Invalid max length",t)}return!1}(e,t)||(e=function(e,t){var n,r,i=f(t);return!1!==i?(n=e,r=i[1],n.length>r&&(n=n.substr(0,r-5)+"(...)"),n):(a("Unable to cut string",t),"")}(e,t)):e=function(e,t){var n=f(t);if(!1!==n){var r=n[0]-e.length;return r>0&&(e="-".repeat(r)+e),e}return a("Unable to extend string",t),null}(e,t),e}function y(e,t,n=!0){if(c.hasOwnProperty(t)){var i=c[t];if(null!=e&&e.constructor.name==i){if(!n||!(0,r.xb)(e))return!0;a("Field is empty",t)}else a("Invalid field type",t)}else a("Unknown field",t);return!1}function v(e){return y(e,"record",!0)&&(y(i=e.timestamp,"timestamp",!0)&&(i.match("^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]) (0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$")||(0,r.iX)(i))||(a("Invalid timestamp",i),0))&&y(e.main,"main",!0)&&(e.main=m(e.main,"main"),e.main)?(e.aside=m(e.aside,"aside"),e.media=y(t=e.media,"media",!0)&&I(t.url)&&(y(n=t.type,"type",!0)&&d.includes(n)||(a("Invalid media type",type),0))?(t.caption=m(t.caption,"caption"),t):{url:"",type:"",caption:""},e):null;var t,n,i}function g(e){return!(!y(e,"id",!0)||!e.match("[a-zA-Z0-9-]{3,36}"))||(a("Invalid thread id",e),!1)}function I(e){return!!(0,i.HH)(e)||(a("Invalid url",e),!1)}function b(e){return!(!I(e)||e!=s)||(a("Invalid app url"),!1)}function w(e){return b||(e=s),e}function x(e){return y(e,"data",!0)&&(e.url=w(e.url),e.author=y(t=e.author,"author",!0)&&I(t.url)&&(t.handle=m(t.handle,"handle"),t.handle)?(t.about=m(t.about,"about"),t):null,e.author&&(e.threads=function(e){if(y(e,"threads",!0)){var t=[];e=e.slice(0,h("threads")[1]);for(var n=0;n<e.length;n++){if(e[n]=y(r=e[n],"threads.item",!0)&&g(r.id)&&(r.record=v(r.record),null!=r.record)?(r.name=m(r.name,"name"),r.description=m(r.description,"description"),r.linked=function(e){e=e.slice(0,h("linked")[1]);for(var t,n=[],r=0;r<e.length;r++){if(y(t=e[r],"linked.item",!0)&&I(t.url)&&g(t.id)||(a("Invalid linked thread"),0)){var i=e[r].url+" "+e[r].id;if(!n.includes(i)){n.push(i);continue}a("Duplicate linked thread",i)}e.splice(r,1)}return e.length&&e.sort(((e,t)=>e.url<t.url?1:-1)),e}(r.linked),r):null,null!=e[n]){if(!t.includes(e[n].id)){t.push(e[n].id);continue}a("Duplicate thread id",e[n].id)}e.splice(n,1)}if(e.length)return e}var r;return a("No valid thread"),[]}(e.threads),e.threads.length))?e:null;var t}},995:(e,t,n)=>{n.d(t,{Ye:()=>f,VQ:()=>h,GY:()=>m,uM:()=>p,FC:()=>c});var r=n(504),i=n(null);const o=(0,r.$o)();var a={},l=["en"],u=null,s=null;function d(e){return(0,i.fw)(e)&&l.includes(e)}function c(e){return!(!d(e)||e==s||(s=e,function(e){o&&u!=e&&(o.setItem("nx-lang",e),u=e)}(e),0))}function p(e){u||c(e)}function f(){return l}function h(){return s}function m(e){var t=e;return"en"!=s&&a[s][e]&&(t=a[s][e]),t}!function(e){if((0,i.bT)(e))Object.assign(a,e),l.push(...Object.keys(a).filter((e=>l.indexOf(e)<0)))}({fr:{data:"données",author:"auteur·rice",handle:"pseudonyme",about:"à propos",url:"url",id:"identifiant",name:"nom",description:"description",timestamp:"horodatage",main:"principal",aside:"à-côté",media:"média",type:"type",caption:"légende",index:"index",distant:"distant",local:"local",threads:"fils",thread:"fil",linked:"liés",record:"entrée",history:"historique",copied:"copié",embed:"intégré",source:"source","No valid thread":"Aucun fil valide","Duplicate thread id":"Identifiant du fil en double","Duplicate linked thread":"Fil lié en double","Invalid linked thread":"Fil lié non valide","Invalid url":"Url non valide","Invalid thread id":"Identifiant de fil non valide","Invalid length":"Longueur non valide","Invalid min length":"Longueur minimale non valide","Invalid max length":"Longueur maximale non valide","Unable to cut string":"Impossible de raccourcir le texte","Invalid timestamp":"Horodatage non valide","Unknown field":"Champ inconnu","Invalid field type":"Type de champ non valide","Field is empty":"Le champ est vide","Unable to extend string":"Impossible de prolonger le texte","Unknown characters limits category":"Catégorie de limite de caractères inconnue","Unknown items limits category":"Catégorie de limite d'éléments inconnue","Invalid media type":"Type de media non valide","Invalid app url":"Url de l'application non valide","Instance already initiated":"Instance déjà initiée","Init failed":"L'initialisation a échoué","Theme not found":"Thème non trouvé","No response":"Aucune réponse","Invalid source":"Source non valide","Origin state already set":"Etat d'origine déjà spécifié"}}),o&&(d(u=o.getItem("nx-lang"))||(u=null,o.removeItem("nx-lang"))),function(){if(u)s=u;else{var e=document.querySelector("html").lang;d(e)||(e="en"),s=e}}()}}]);