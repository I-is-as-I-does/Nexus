/*! For license information please see 295.js.LICENSE.txt */
"use strict";(self.webpackChunknexus=self.webpackChunknexus||[]).push([[295],{370:(e,n,t)=>{t.d(n,{xu:()=>d,XF:()=>c,Xj:()=>s});var r,i,a,o=t(268),l=t(899),u=t(187);function d(e=null){r?(0,o.Pr)("Nexus | container already set"):(e||(e=l.cZ),(r=document.querySelector(e))?r.dataset&&(0,u.O)(Object.assign({},r.dataset)):(r=document.createElement("DIV"),document.body.append(r)),(i=document.createElement("DIV")).className="nexus",(a=r.attachShadow({mode:"open"})).append(i))}function c(){return i||d(),i}function s(){return a||d(),a}},899:(e,n,t)=>{t.d(n,{cZ:()=>r,zE:()=>i});const r="#Nexus",i={src:null,id:"/",style:"https://cdn.jsdelivr.net/gh/I-is-as-I-does/Nexus-Prototype@latest/cdn/css/NexusI.css",lang:"en",history:!1,debug:!1}},187:(e,n,t)=>{t.d(n,{O:()=>d,B:()=>c});var r=t(368),i=t(753),a=t(268),o=t(359),l=t(256),u=t(899).zE;function d(e){(0,r.bT)(e)&&((0,i.HH)(e.src)&&(u.src=e.src,(0,l.Q0)(e.id)&&(u.id=e.id)),(0,i.HH)(e.style)&&(u.style=e.style),(0,r.fw)(e.lang)&&(u.lang=e.lang,(0,o.uM)(e.lang)),["history","debug"].forEach((n=>{"true"!==e[n]&&!0!==e[n]||(u[n]=!0,"debug"==n&&(0,a.yD)(!0))})))}function c(e){return u[e]}},368:(e,n,t)=>{function r(e){return null!==e&&"Object"==e.constructor.name&&Object.keys(e).length}function i(e){return("string"==typeof e||e instanceof String)&&e.length}function a(e){return i(e)&&!isNaN(new Date(e))}function o(e){return"object"==typeof e?!Object.keys(e).length:!e||!e.length}t.d(n,{bT:()=>r,fw:()=>i,iX:()=>a,xb:()=>o})},947:(e,n,t)=>{function r(e,n){return e.length>n&&(e=e.substr(0,n-5)+"(...)"),e}function i(e){if(""==e||0==e.length)return"";for(var n={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ă:"a",ą:"a",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",ð:"e",ę:"e",Ç:"C",ç:"c",ć:"c",č:"c",Ð:"D",đ:"d",ğ:"g",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ł:"L",ł:"l",Ñ:"N",ñ:"n",ń:"n",Š:"S",š:"s",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ÿ:"Y",ÿ:"y",ý:"y",Ž:"Z",ž:"z",Ż:"Z",ż:"z",ɶ:"oe",Œ:"OE",æ:"ae",Æ:"AE",ß:"ss"},t=Object.keys(n),r=0;r<t.length;r++){var i=t[r],a=n[i];e=e.replace(i,a)}return e}t.d(n,{Oq:()=>r,V7:()=>i})},811:(e,n,t)=>{function r(){return l("localStorage")?localStorage:null}function i(){return l("sessionStorage")?sessionStorage:null}function a(e,n=!0){var t,r=(t=JSON.stringify(e),(new TextEncoder).encode(t).length);return n&&(r/=1e3),r}function o(e,n=null,t=2e3){null==n&&(n=a(e,!0));for(var r=0;r<e.length;r++){var i=e.key(r),o=a(e.getItem(i),!0);if(e.removeItem(i),(n+=o)>t)break}}function l(e){var n;try{n=window[e];var t="__storage_test__";return n.setItem(t,t),n.removeItem(t),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&n&&0!==n.length}}function u(e,n){navigator.clipboard.writeText(e).then((()=>n()))}t.d(n,{$o:()=>r,G:()=>i,$w:()=>a,hh:()=>o,vQ:()=>u})},753:(e,n,t)=>{function r(e){let n;try{n=new URL(e)}catch(e){return!1}return"http:"===n.protocol||"https:"===n.protocol}function i(e){return fetch(e).then((e=>e.json()))}function a(e,n,t=null,r=null){n=n.toLowerCase();var i={youtube:"https://youtube.com/oembed?url=",vimeo:"https://vimeo.com/api/oembed.json?url=",soundcloud:"https://soundcloud.com/oembed?format=json&url="};return!!i.hasOwnProperty(n)&&(e=i[n]+encodeURIComponent(e),null!=t&&(e+="&maxwidth="+t),null!=r&&(e+="&maxheight="+r),e)}function o(e){return i(e).then((e=>{if(e&&e.hasOwnProperty("html"))return e;throw"invalid oembed response"}))}function l(e){var n=e.html.split('src="')[1].split('"')[0],t=document.createElement("IFRAME");return t.width=e.width,t.height=e.height,t.frameborder="no",t.scrolling="no",t.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",t.allowfullscreen=!0,t.title=e.title,t.src=n,t}function u(e){return e.split(/[\\/]/).pop()}function d(e,n,t=null){return t||!function(e,n){if(document.styleSheets.length)for(var t=u(n),r=0;r<document.styleSheets.length;r++){var i=document.styleSheets[r].href;if(i){if(i==n||u(i)==t)return!0;if(i.startsWith(window.location.origin)){var a=document.styleSheets[r].cssRules;for(let n=0;n<a.length;n++)if(a[n].selectorText==e)return!0}}}return!1}(e,n)?new Promise(((e,r)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onload=e,i.onerror=r,i.href=n,t?t.prepend(i):document.head.append(i)})):Promise.resolve(!0)}function c(e,n=!0){var t=e.replace(/^(https?:\/\/)?/,"").split("/");if(e=t[0],n&&t.length>1){t.length>2&&(e+="/...");var r=t.pop();r.length>18&&(r="..."+r.substr(-15)),e+="/"+r}return e}function s(e){for(var n=e.replace(/^(https?:\/\/)?(www.)?/,"").split(":")[0].split("/")[0].split("."),t=0;t<n.length;t++)if(n[t].includes("-"))n[t]=n[t].split("-").map((e=>e[0])).join("-");else{for(var r=n[t].split(""),i=0,a=0;a<r.length;a++)["a","e","i","o","u","y"].includes(r[a])&&(0!==i&&a!==i+1?r[a]="":i=a);n[t]=r.join("")}return n.join(".")}t.d(n,{HH:()=>r,_l:()=>i,ip:()=>a,ie:()=>o,qm:()=>l,Yc:()=>d,Fj:()=>c,AB:()=>s})},906:(e,n,t)=>{t.d(n,{A:()=>u,o:()=>d});var r=t(753),i=t(268),a=t(370),o=t(187),l={};function u(e=null,n=".nexus"){return e||(e=(0,o.B)("style")),(0,r.Yc)(n,e,(0,a.Xj)()).then((()=>(l[e]=!0,!0))).catch((n=>{throw(0,i.Pr)(n),(0,i.fZ)("Theme not found"),l[e]=!1,404}))}function d(e=null){return e||(e=(0,o.B)("style")),l[e]}},268:(e,n,t)=>{t.d(n,{Pr:()=>o,yD:()=>l,ab:()=>u,fZ:()=>d,ah:()=>c});var r=t(368),i=[],a=!1;function o(e){a&&console.log(e)}function l(e=!0){a=e}function u(){i=[]}function d(e,n=null){var t={msg:e};(0,r.fw)(n)&&(t.detail=t),i.push(e)}function c(){return i}},769:(e,n,t)=>{t.d(n,{hb:()=>g,Mq:()=>m,Ek:()=>h,t$:()=>f,rz:()=>v,f2:()=>p});var r=t(187),i=t(753),a=t(268),o=t(27),l=t(256);document.cookie="Nx=Instance; SameSite=None; Secure";var u=!1,d={dataUrl:null,srcData:null,threadId:"/",threadIndex:-1},c={onChange:[],onSrcChange:[]},s=!1;function f(e,n){return function(e){var n=(0,o.Yb)(e);return null!==n?Number.isInteger(n)?Promise.reject(n):Promise.resolve(n):function(e){return(0,i._l)(e).then((n=>((0,a.ab)(),(n=(0,l.gV)(n))?(function(e){e.index=[],e.threads.map((n=>{e.index.push(n.id)}))}(n),(0,o.pH)(e,n),n):((0,o.pH)(e,400),(0,a.Pr)((0,a.ah)()),(0,a.fZ)("Invalid source"),Promise.reject(400))))).catch((n=>{throw(0,a.Pr)(n),(0,o.pH)(e,404),(0,a.fZ)("No response"),404}))}(e)}(e).then((t=>{var r={dataUrl:e,threadId:n,srcData:t,threadIndex:t.index.indexOf(n)};return-1===r.threadIndex&&"/"!==n&&(r.threadId="/"),r}))}function h(e,n=!1){var t="onChange";n&&(t="onSrcChange"),c[t].push(e)}function p(e,n=!1){if(!s){var t=e.dataUrl!=d.dataUrl;(t||e.threadId!=d.threadId)&&(s=!0,n||((0,o.Dy)(d),(0,r.B)("history")&&function(e){var n={id:e.threadId,src:e.dataUrl,ix:e.threadIndex};history.replaceState(n,""),history.pushState(n,"")}(d)),d=e,function(e){var n=["onChange"];e&&n.push("onSrcChange"),n.forEach((e=>{c[e].length&&c[e].forEach((e=>{e(d)}))}))}(t),setTimeout((function(){s=!1}),800))}}function m(){return d}function v(e){return!d.dataUrl&&(d=e,!0)}function g(){return 800}(0,r.B)("history")&&(u||(u=!0,window.onpopstate=e=>{if(e.state&&e.state.src&&e.state.id&&e.state.ix){var n=e.state;n.srcData=(0,o.Yb)(e.state.src),p(n,!1)}}))},27:(e,n,t)=>{t.d(n,{KR:()=>x,Yb:()=>w,Ih:()=>g,XU:()=>U,VG:()=>O,$3:()=>I,pH:()=>b,EW:()=>v,q1:()=>S,Dy:()=>y,eG:()=>k});var r=t(753),i=t(811);const a=(0,i.$o)(),o=(0,i.G)();function l(e){e&&!e.getItem("available")&&e.setItem("available",5e3)}function u(e){return"session"==e?o:a}function d(e,n,t="session",r=null,a=!0){r&&(r[e]=n);var o=u(t);if(null!=o){var l=(0,i.$w)(n,!0);if(l>2e3)return;var d=o.getItem("available");d<100&&(0,i.hh)(o,d,2e3),d-=l,a&&(n=JSON.stringify(n)),o.setItem(e,n),o.setItem("available",d)}}function c(e,n="session",t=null,r=!0){if(null!==t&&t.hasOwnProperty(e))return t[e];var i=u(n);if(i){var a=i.getItem(e);if(a)return r&&(a=JSON.parse(a)),t&&(t[e]=a),a}return null}l(a),l(o);var s={},f={},h={},p={};function m(e){if(-1!=e.threadIndex){var n=e.srcData.threads[e.threadIndex].record.timestamp;return new Date(n)}return null}function v(e){d("nx-edit",e,"local")}function g(){return c("nx-edit","local")}function y(e){var n=e.dataUrl+"#"+e.threadId;if(!s.hasOwnProperty(n)){var t=m(e);t&&d(n,t,"local",s,!1)}}function I(e){var n=function(e){var n=c(e.dataUrl+"#"+e.threadId,"local",s,!1);return n?new Date(n):null}(e);if(!n)return!0;var t=m(e);return!t||n==t}function b(e,n){d(e,n,"session",f)}function w(e){return c(e,"session",f)}function x(e){var n=c(e,"local",h,!1);return n||d(e,n=(0,r.AB)(e),"local",h,!1),n}function S(e,n){d(e,n,"local",p,!0)}function O(e){return c(e,"local",p,!0)}function k(e){d("nx-lang",e,"local",null,!1)}function U(){return c("nx-lang","local",null,!1)}},359:(e,n,t)=>{t.d(n,{Ye:()=>f,VQ:()=>h,GY:()=>p,uM:()=>d,FC:()=>s});var r=t(368),i=t(27),a={fr:{data:"données",author:"auteur·rice",handle:"pseudonyme",about:"à propos",url:"url",id:"id",name:"nom",description:"description",timestamp:"date",main:"principal",aside:"secondaire",media:"média",type:"type",caption:"légende",index:"index",distant:"distant",local:"local",threads:"fils",thread:"fil",linked:"liés",record:"contenu",history:"historique",copied:"copié",embed:"intégré",source:"source",del:"suppr","No valid thread":"Aucun fil valide","Duplicate thread id":"Identifiant du fil en double","Duplicate linked thread":"Fil lié en double","Invalid linked thread":"Fil lié non valide","Invalid url":"Url non valide","Invalid thread id":"Identifiant de fil non valide","Invalid length":"Longueur non valide","Invalid min length":"Longueur minimale non valide","Invalid max length":"Longueur maximale non valide","Unable to cut string":"Impossible de raccourcir le texte","Invalid timestamp":"Horodatage non valide","Unknown field":"Champ inconnu","Invalid field type":"Type de champ non valide","Field is empty":"Le champ est vide","Unable to extend string":"Impossible de prolonger le texte","Unknown characters limits category":"Catégorie de limite de caractères inconnue","Unknown items limits category":"Catégorie de limite d'éléments inconnue","Invalid media type":"Type de media non valide","Invalid app url":"Url de l'application non valide","Init failed":"L'initialisation a échoué","Theme not found":"Thème non trouvé","No response":"Aucune réponse","Invalid source":"Source non valide"}},o=["en","fr"],l=(0,i.XU)();null==l||c(l)||(l=null,(0,i.eG)(null));var u=null;function d(e){l||s(e)}function c(e){return(0,r.fw)(e)&&o.includes(e)}function s(e){return!(!c(e)||e==u||(u=e,function(e){l!=e&&((0,i.eG)(e),l=e)}(e),0))}function f(){return o}function h(){return u}function p(e){var n=e;return"en"!=u&&a[u][e]&&(n=a[u][e]),n}l?u=l:c(u=document.querySelector("html").lang)||(u="en")},306:(e,n,t)=>{t.d(n,{Gd:()=>r,Ln:()=>i,m2:()=>a,SO:()=>o,WS:()=>l,og:()=>u,Q1:()=>d});const r="https://github.com/I-is-as-I-does/Nexus-Prototype",i={data:"Object",nexus:"String",author:"Object",handle:"String",about:"String",url:"String",threads:"Array","threads.item":"Object",id:"String",name:"String",description:"String",record:"Object",timestamp:"String",main:"String",aside:"String",media:"Object",type:"String",caption:"String",linked:"Array","linked.item":"Object"},a={handle:[3,30],about:[0,400],name:[3,30],description:[0,400],main:[1,1e3],aside:[0,400],caption:[0,200]},o={threads:[1,100],linked:[0,100]},l=["page","video","image","audio","youtube","vimeo","soundcloud"],u="^[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])(T(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]))?$",d="[a-zA-Z0-9-]{3,36}"},256:(e,n,t)=>{t.d(n,{Q0:()=>h,gV:()=>m});var r=t(368),i=t(753),a=t(947),o=t(306),l=t(268);function u(e){return o.m2.hasOwnProperty(e)?o.m2[e]:((0,l.fZ)("Unknown characters limits category",e),!1)}function d(e){return o.SO.hasOwnProperty(e)?o.SO[e]:((0,l.fZ)("Unknown items limits category",e),!1)}function c(e,n){return s(e,n,!0)||(e=""),function(e,n){var t=u(n);if(!1!==t){if(e.length>=t[0])return!0;(0,l.fZ)("Invalid min length",n)}return!1}(e,n)?function(e,n){var t=u(n);if(!1!==t){if(e.length<=t[1])return!0;(0,l.fZ)("Invalid max length",n)}return!1}(e,n)||(e=function(e,n){var t=u(n);return!1!==t?(0,a.Oq)(e,t[1]):((0,l.fZ)("Unable to cut string",n),"")}(e,n)):e=function(e,n){var t=u(n);if(!1!==t){var r=t[0]-e.length;return r>0&&(e="-".repeat(r)+e),e}return(0,l.fZ)("Unable to extend string",n),null}(e,n),e}function s(e,n,t=!0){if(o.Ln.hasOwnProperty(n)){var i=o.Ln[n];if(null!=e&&e.constructor.name==i){if(!t||!(0,r.xb)(e))return!0;(0,l.fZ)("Field is empty",n)}else(0,l.fZ)("Invalid field type",n)}else(0,l.fZ)("Unknown field",n);return!1}function f(e){return s(e,"record",!0)&&function(e,n=!1){return!(!s(e,"timestamp",!0)||!(e.match(o.og)||!n&&(0,r.iX)(e)))||((0,l.fZ)("Invalid timestamp",e),!1)}(e.timestamp)&&s(e.main,"main",!0)&&(e.main=c(e.main,"main"),e.main)?(e.aside=c(e.aside,"aside"),e.media=s(n=e.media,"media",!0)&&p(n.url)&&(s(t=n.type,"type",!0)&&o.WS.includes(t)||((0,l.fZ)("Invalid media type",type),0))?(n.caption=c(n.caption,"caption"),n):{url:"",type:"",caption:""},e):null;var n,t}function h(e){return!(!s(e,"id",!0)||!e.match(o.Q1))||((0,l.fZ)("Invalid thread id",e),!1)}function p(e){return!!(0,i.HH)(e)||((0,l.fZ)("Invalid url",e),!1)}function m(e){return s(e,"data",!0)&&(e.url=(function(e){return!(!p(e)||e!=o.Gd)||((0,l.fZ)("Invalid app url"),!1)}(n=e.url)||(n=o.Gd),n),e.author=s(t=e.author,"author",!0)&&p(t.url)&&(t.handle=c(t.handle,"handle"),t.handle)?(t.about=c(t.about,"about"),t):null,e.author&&(e.threads=function(e){if(s(e,"threads",!0)){var n=[];e=e.slice(0,d("threads")[1]);for(var t=0;t<e.length;t++){if(e[t]=s(r=e[t],"threads.item",!0)&&h(r.id)&&(r.record=f(r.record),null!=r.record)?(r.name=c(r.name,"name"),r.description=c(r.description,"description"),r.linked=function(e){e.slice(0,d("linked")[1]);for(var n,t=[],r=0;r<e.length;r++){if(s(n=e[r],"linked.item",!0)&&p(n.url)&&h(n.id)||((0,l.fZ)("Invalid linked thread"),0)){var i=e[r].url+" "+e[r].id;if(!t.includes(i)){t.push(i);continue}(0,l.fZ)("Duplicate linked thread",i)}e.splice(r,1)}return e.length&&e.sort(((e,n)=>e.url<n.url?1:-1)),e}(r.linked),r):null,null!=e[t]){if(!n.includes(e[t].id)){n.push(e[t].id);continue}(0,l.fZ)("Duplicate thread id",e[t].id)}e.splice(t,1)}if(e.length)return e}var r;return(0,l.fZ)("No valid thread"),[]}(e.threads),e.threads.length))?e:null;var n,t}}}]);